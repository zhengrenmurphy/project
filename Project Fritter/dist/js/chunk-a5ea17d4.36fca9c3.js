(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a5ea17d4"],{"82f4":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"main"},[n("FreetList")],1)])},s=[],o=n("ba84"),a={name:"freets",components:{FreetList:o["a"]}},c=a,i=n("2877"),u=Object(i["a"])(c,r,s,!1,null,null,null);t["default"]=u.exports},ba84:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"subcontainer"},[n("div",{staticClass:"header secondary-header"},[e._v(" Freets ")]),n("div",[e.success?n("div",{staticClass:"success-message"},[e._v(" "+e._s(e.success)+" ")]):e._e(),e.error?n("div",{staticClass:"error-message"},[e._v(" "+e._s(e.error)+" ")]):e._e(),n("div",{staticClass:"freets-container"},[e.freets.length?n("div",e._l(e.freets,(function(e){return n("Freet",{key:e.id,attrs:{freet:e}})})),1):n("div",[n("p",{staticStyle:{"text-align":"center"}},[e._v("There are no freets to display. Create one today!")])])])])])},s=[],o=n("bc3a"),a=n.n(o),c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"freet-container"},[n("div",{staticClass:"freet-name"},[e._v(" "+e._s(e.freet.freetID))]),n("p",[e._v("Creator ID: "+e._s(e.freet.creatorUserID))]),n("p",[e._v("Freet Content: "+e._s(e.freetContent))]),n("p",[e._v("Freet ID: "+e._s(e.freet.freetID))]),e.isUpvoted?e.isUpvoted?n("button",{attrs:{variant:"info"},on:{click:e.onUndoUpvote}},[e._v("Undo Upvote")]):e._e():n("button",{attrs:{variant:"info"},on:{click:e.onUpvote}},[e._v("Upvote")]),e._v(" # upvotes : "+e._s(e.voteCounts)+" "),n("div",{staticClass:"freet-item-actions"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.editFreetForm.content,expression:"editFreetForm.content"}],staticClass:"edit",attrs:{type:"text",name:"content",placeholder:"New Content"},domProps:{value:e.editFreetForm.content},on:{input:function(t){t.target.composing||e.$set(e.editFreetForm,"content",t.target.value)}}}),n("button",{on:{click:e.updateFreet}},[e._v("Update")]),n("button",{on:{click:e.deleteFreet}},[e._v("Delete")])])])},i=[],u=n("56d7"),f={name:"freet",components:{},props:{freet:Object,user:Object,isSignedIn:Boolean},data:function(){return{isUpvoted:!1,editFreetPopup:!1,editFreetForm:{content:""},voteCounts:this.countVotes(),freetContent:this.freet.content,freetCurrent:this.freet,author:{username:this.freet.creatorUserID}}},computed:{isAuthor:function(){return this.$cookie.get("fritter-auth")==this.freet.creatorUserID}},methods:{countVotes:function(){var e=this,t={id:this.freet.freetID};a.a.get("/api/upvote?id=".concat(t.id),t).then((function(t){e.voteCounts=t.data})).catch((function(e){u["eventBus"].$emit("count-votes-error",e)})).then((function(){}))},updateFreet:function(){var e=this,t={id:this.freet.freetID,content:this.editFreetForm.content};a.a.patch("/api/freets",t).then((function(t){e.freetContent=t.data.content,u["eventBus"].$emit("update-freet-success",t)})).catch((function(e){u["eventBus"].$emit("update-freet-error",e)})).then((function(){return e.editFreetForm.content=""}))},deleteFreet:function(){var e=this,t={id:this.freet.freetID};a.a.delete("/api/freets?id=".concat(t.id),t).then((function(){u["eventBus"].$emit("delete-freet-success",e.freet),e.freetCurrent={}})).catch((function(e){u["eventBus"].$emit("delete-freet-error",e)})).then((function(){}))},onUpvote:function(){var e=this,t={id:this.freet.freetID};a.a.post("/api/upvote",t).then((function(){e.isUpvoted=!0,e.voteCounts=e.countVotes()})).catch((function(e){u["eventBus"].$emit("upvote-error",e)})).then((function(){}))},onUndoUpvote:function(){var e=this,t={id:this.freet.freetID};a.a.patch("/api/upvote",t).then((function(){e.isUpvoted=!1,e.voteCounts=e.countVotes()})).catch((function(e){u["eventBus"].$emit("upvote-error",e)})).then((function(){}))}}},d=f,v=n("2877"),l=Object(v["a"])(d,c,i,!1,null,null,null),p=l.exports,h={name:"FreetList",components:{Freet:p},props:{user:Object,isSignedIn:Boolean},data:function(){return{error:"",success:"",freets:[]}},created:function(){var e=this;u["eventBus"].$on("create-freet-success",(function(t){e.freets.push(t.data)})),u["eventBus"].$on("update-freet-success",(function(t){e.success="Freet name ".concat(t.data.freetName," now resolves to ").concat(t.data.url),e.clearMessages(),e.loadFreets()})),u["eventBus"].$on("delete-freet-success",(function(t){e.success="Freet name ".concat(t.freetName," has been deleted"),e.clearMessages(),e.loadFreets()}))},mounted:function(){this.loadFreets()},methods:{loadFreets:function(){var e=this;a.a.get("/api/freets").then((function(t){e.freets=t.data}))},clearMessages:function(){var e=this;setInterval((function(){e.success="",e.error=""}),5e3)}}},m=h,F=Object(v["a"])(m,r,s,!1,null,null,null);t["a"]=F.exports}}]);
//# sourceMappingURL=chunk-a5ea17d4.36fca9c3.js.map