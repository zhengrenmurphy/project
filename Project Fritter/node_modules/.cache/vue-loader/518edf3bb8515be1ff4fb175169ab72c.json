{"remainingRequest":"/Users/murphyren/Desktop/170/AS/a5-sanjass-zhengren/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/murphyren/Desktop/170/AS/a5-sanjass-zhengren/src/components/FreetList.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/murphyren/Desktop/170/AS/a5-sanjass-zhengren/src/components/FreetList.vue","mtime":1605052849654},{"path":"/Users/murphyren/Desktop/170/AS/a5-sanjass-zhengren/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/murphyren/Desktop/170/AS/a5-sanjass-zhengren/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/murphyren/Desktop/170/AS/a5-sanjass-zhengren/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/murphyren/Desktop/170/AS/a5-sanjass-zhengren/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7Ci8vIGltcG9ydCBGcmVldExpc3RJdGVtIGZyb20gIi4vRnJlZXRMaXN0SXRlbSI7CmltcG9ydCBGcmVldCBmcm9tICIuL0ZyZWV0IjsKCgppbXBvcnQgeyBldmVudEJ1cyB9IGZyb20gIi4uL21haW4iOwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJGcmVldExpc3QiLAoKICBjb21wb25lbnRzOiB7IEZyZWV0IH0sCgogIHByb3BzOiB7CiAgICAgIHVzZXIgOiBPYmplY3QsCiAgICAgIGlzU2lnbmVkSW46Qm9vbGVhbiwKICAgIH0sCgogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBlcnJvcjogIiIsCiAgICAgIHN1Y2Nlc3M6ICIiLAogICAgICBmcmVldHM6IFtdLAogICAgICBmb2xsb3dpbmc6IFtdCiAgICB9OwogIH0sCgogIGNyZWF0ZWQ6IGZ1bmN0aW9uKCkgewogICAgZXZlbnRCdXMuJG9uKCJjcmVhdGUtZnJlZXQtc3VjY2VzcyIsIHJlcyA9PiB7CiAgICAgIHRoaXMuZnJlZXRzLnB1c2gocmVzLmRhdGEpOwogICAgICB0aGlzLmxvYWRGcmVldHMoKTsKICAgIH0pOwoKICAgIGV2ZW50QnVzLiRvbigiY3JlYXRlLXJlZnJlZXQtc3VjY2VzcyIsIHJlcyA9PiB7CiAgICAgIHRoaXMuc3VjY2VzcyA9IGBSZWZyZWV0IHdpdGggSUQgJHtyZXMuZGF0YS5mcmVldElEfSBoYXMgYmVlbiBjcmVhdGVkYDsKICAgICAgdGhpcy5mcmVldHMucHVzaChyZXMuZGF0YSk7CiAgICAgIHRoaXMubG9hZEZyZWV0cygpOwogICAgfSk7CgogICAgZXZlbnRCdXMuJG9uKCJ1cGRhdGUtZnJlZXQtc3VjY2VzcyIsIHJlcyA9PiB7CiAgICAgIHRoaXMuc3VjY2VzcyA9IGBGcmVldCB3aXRoIElEICR7cmVzLmRhdGEuZnJlZXRJRH0gbm93IHVwZGF0ZWQgdG8gJHsKICAgICAgICByZXMuZGF0YS5jb250ZW50CiAgICAgIH1gOwogICAgICB0aGlzLmNsZWFyTWVzc2FnZXMoKTsKICAgICAgdGhpcy5sb2FkRnJlZXRzKCk7CiAgICB9KTsKCiAgICBldmVudEJ1cy4kb24oImRlbGV0ZS1mcmVldC1zdWNjZXNzIiwgcmVzID0+IHsKICAgICAgdGhpcy5zdWNjZXNzID0gYEZyZWV0IHdpdGggSUQgJHtyZXMuZnJlZXRJRH0gaGFzIGJlZW4gZGVsZXRlZGA7CiAgICAgIHRoaXMuY2xlYXJNZXNzYWdlcygpOwogICAgICB0aGlzLmxvYWRGcmVldHMoKTsKICAgIH0pOwogICAgZXZlbnRCdXMuJG9uKCJ1cHZvdGUtc3VjY2VzcyIsICgpID0+IHsKICAgICAgdGhpcy5zdWNjZXNzID0gYEZyZWV0IGhhcyBzdWNjZXNzZnVsbHkgYmVlbiB1cHZvdGVkYDsKICAgICAgdGhpcy5jbGVhck1lc3NhZ2VzKCk7CiAgICAgIHRoaXMubG9hZEZyZWV0cygpOwogICAgfSk7CiAgICBldmVudEJ1cy4kb24oInVwdm90ZS1lcnJvciIsICgpPT4gewogICAgICB0aGlzLmVycm9yID0gYEVycm9yIHdoZW4gRnJlZXQgaXMgdXB2b3RlZGA7CiAgICAgIHRoaXMuY2xlYXJNZXNzYWdlcygpOwogICAgICB0aGlzLmxvYWRGcmVldHMoKTsKICAgIH0pOwogICAgZXZlbnRCdXMuJG9uKCJvbnVwdm90ZS1zdWNjZXNzIiwgKCkgPT4gewogICAgICB0aGlzLnN1Y2Nlc3MgPSBgRnJlZXQgaGFzIGJlZW4gdW51cHZvdGVkYDsKICAgICAgdGhpcy5jbGVhck1lc3NhZ2VzKCk7CiAgICAgIHRoaXMubG9hZEZyZWV0cygpOwogICAgfSk7CiAgICBldmVudEJ1cy4kb24oIm9udXB2b3RlLWVycm9yIiwgKCkgPT4gewogICAgICB0aGlzLmVycm9yID0gYEVycm9yIHdoZW4gRnJlZXQgaXMgdW51cHZvdGVkYDsKICAgICAgdGhpcy5jbGVhck1lc3NhZ2VzKCk7CiAgICAgIHRoaXMubG9hZEZyZWV0cygpOwogICAgfSk7CgogICAgZXZlbnRCdXMuJG9uKCJ1cGRhdGUtZnJlZXQtZXJyb3IiLCByZXMgPT4gewogICAgICB0aGlzLmVycm9yID0gYEVycm9yIHVwZGF0aW5nIGZyZWV0ICR7cmVzLmRhdGEuZnJlZXRJRH1gOwogICAgICB0aGlzLmNsZWFyTWVzc2FnZXMoKTsKICAgICAgdGhpcy5sb2FkRnJlZXRzKCk7CiAgICB9KTsKCiAgICBldmVudEJ1cy4kb24oImRlbGV0ZS1mcmVldC1lcnJvciIsIHJlcyA9PiB7CiAgICAgIHRoaXMuZXJyb3IgPSBgRXJyb3IgZGVsZXRpbmcgZnJlZXQgJHtyZXMuZnJlZXROYW1lfWA7CiAgICAgIHRoaXMuY2xlYXJNZXNzYWdlcygpOwogICAgICB0aGlzLmxvYWRGcmVldHMoKTsKICAgIH0pOwoKICAgIGV2ZW50QnVzLiRvbigicmVsb2FkX2ZvbGxvd2luZyIsICgpID0+IHsKICAgICAgICB0aGlzLmdldEZvbGxvd2luZygpOwoKICAgIH0pOwogIH0sCgogIG1vdW50ZWQ6IGZ1bmN0aW9uKCkgewogICAgdGhpcy5nZXRGb2xsb3dpbmcoKTsKICAgIHRoaXMubG9hZEZyZWV0cygpOwogIH0sCgogIG1ldGhvZHM6IHsKICAgIGxvYWRGcmVldHM6IGZ1bmN0aW9uKCkgewogICAgICBheGlvcwogICAgICAuZ2V0KGAvYXBpL2ZyZWV0c2ApLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgIHZhciB1bnNvcnRlZF9mcmVldHMgPSByZXNwb25zZS5kYXRhOwogICAgICAgIHVuc29ydGVkX2ZyZWV0cy5yZXZlcnNlKCk7CiAgICAgICAgdmFyIGF1dGhlbnRpY2F0ZWQgPSB0aGlzLiRjb29raWUuZ2V0KCdmcml0dGVyLWF1dGgnKTsKICAgICAgICBpZiAoYXV0aGVudGljYXRlZCl7CiAgICAgICAgIHZhciBtYXBwZWRfZm9sbG93aW5nID0gdGhpcy5mb2xsb3dpbmcubWFwKHUgPT4gdS5pZCk7CiAgICAgICAgICB2YXIgZmluYWwgPSBbXTsKICAgICAgICAgIHVuc29ydGVkX2ZyZWV0cy5mb3JFYWNoKGZyZWV0ID0+IHsKICAgICAgICAgICAgICAgICAgICBpZiAobWFwcGVkX2ZvbGxvd2luZy5pbmNsdWRlcyhmcmVldC5jcmVhdG9yVXNlcklEKSl7CiAgICAgICAgICAgICAgICAgICAgICAgIGZpbmFsLnVuc2hpZnQoZnJlZXQpOyAvLyBpZiBmb2xsb3dpbmcgdXNlciwgcHVzaCBmcmVldCB0byBmcm9udAogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGZpbmFsLnB1c2goZnJlZXQpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pCiAgICAgICAgdGhpcy5mcmVldHMgPSBmaW5hbDsKCiAgICAgICAgfQogICAgICAgIGVsc2UgewogICAgICAgICAgdGhpcy5mcmVldHMgPSB1bnNvcnRlZF9mcmVldHM7CiAgICAgICAgfQogICAgICAgIAogICAgICB9KQogICAgfSwKCiAgICBnZXRGb2xsb3dpbmc6IGZ1bmN0aW9uKCkgewogICAgICAgIGNvbnN0IGJvZHlDb250ZW50ID0ge307CiAgICAgICAgYXhpb3MKICAgICAgICAgIC5nZXQoIi9hcGkvZm9sbG93cy9mb2xsb3dpbmciLCBib2R5Q29udGVudCkKICAgICAgICAgIC50aGVuKChyZXMpID0+IHsKICAgICAgICAgICAgdGhpcy5mb2xsb3dpbmcgPSByZXMuZGF0YS5mb2xsb3dpbmcubWFwKHUgPT4gdSk7Ly8uZm9sbG93ZWRJRCk7CiAgICAgICAgfSkuY2F0Y2goKCkgPT4gewogICAgICAgICAgLy8gdGhpcy5lcnJvciA9ICJBbiB1bmV4cGVjdGVkIGVycm9yIG9jY3VyZWQuIFBsZWFzZSBzaWduIGluIGFnYWluLiI7CiAgICAgICAgICAvLyB0aGlzLmNsZWFyTWVzc2FnZXMoKTsKICAgICAgICAgIGV2ZW50QnVzLiRlbWl0KCJ0cmlnZ2VyLXNpZ25vdXQiLCB0cnVlKTsKICAgICAgICAgIAogICAgICAgIH0pfSwKCiAgICBjbGVhck1lc3NhZ2VzOiBmdW5jdGlvbigpIHsKICAgICAgc2V0SW50ZXJ2YWwoKCkgPT4gewogICAgICAgIHRoaXMuc3VjY2VzcyA9ICIiOwogICAgICAgIHRoaXMuZXJyb3IgPSAiIjsKICAgICAgfSwgNTAwMCk7CiAgICB9CiAgfQp9Owo="},{"version":3,"sources":["FreetList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmCA;AACA;AACA;;;AAGA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"FreetList.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"subcontainer\">\n    <div v-if='success' class=\"success-message\">\n        {{ success }}\n      </div>\n      <div v-if='error' class=\"error-message\">\n        {{ error }}\n      </div>\n    <div class=\"header secondary-header\">\n      Freets\n    </div>\n    <div>\n      \n\n      <div class=\"freets-container\">  \n        <div v-if=\"freets.length\">\n          <Freet\n          v-for=\"freet in freets\"\n          v-bind:key=\"freet.freetID\"\n          v-bind:freet=\"freet\"\n          v-bind:isAuth1=\"true\"\n        />\n        </div>\n        <div v-else>\n  <p style=\"text-align: center;\">There are no freets to display.</p><br>\n          <router-link :to=\"`/createnew`\">\n          <div class=\"single-center\">Create one today</div>\n          </router-link>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\n// import FreetListItem from \"./FreetListItem\";\nimport Freet from \"./Freet\";\n\n\nimport { eventBus } from \"../main\";\n\nexport default {\n  name: \"FreetList\",\n\n  components: { Freet },\n\n  props: {\n      user : Object,\n      isSignedIn:Boolean,\n    },\n\n  data() {\n    return {\n      error: \"\",\n      success: \"\",\n      freets: [],\n      following: []\n    };\n  },\n\n  created: function() {\n    eventBus.$on(\"create-freet-success\", res => {\n      this.freets.push(res.data);\n      this.loadFreets();\n    });\n\n    eventBus.$on(\"create-refreet-success\", res => {\n      this.success = `Refreet with ID ${res.data.freetID} has been created`;\n      this.freets.push(res.data);\n      this.loadFreets();\n    });\n\n    eventBus.$on(\"update-freet-success\", res => {\n      this.success = `Freet with ID ${res.data.freetID} now updated to ${\n        res.data.content\n      }`;\n      this.clearMessages();\n      this.loadFreets();\n    });\n\n    eventBus.$on(\"delete-freet-success\", res => {\n      this.success = `Freet with ID ${res.freetID} has been deleted`;\n      this.clearMessages();\n      this.loadFreets();\n    });\n    eventBus.$on(\"upvote-success\", () => {\n      this.success = `Freet has successfully been upvoted`;\n      this.clearMessages();\n      this.loadFreets();\n    });\n    eventBus.$on(\"upvote-error\", ()=> {\n      this.error = `Error when Freet is upvoted`;\n      this.clearMessages();\n      this.loadFreets();\n    });\n    eventBus.$on(\"onupvote-success\", () => {\n      this.success = `Freet has been unupvoted`;\n      this.clearMessages();\n      this.loadFreets();\n    });\n    eventBus.$on(\"onupvote-error\", () => {\n      this.error = `Error when Freet is unupvoted`;\n      this.clearMessages();\n      this.loadFreets();\n    });\n\n    eventBus.$on(\"update-freet-error\", res => {\n      this.error = `Error updating freet ${res.data.freetID}`;\n      this.clearMessages();\n      this.loadFreets();\n    });\n\n    eventBus.$on(\"delete-freet-error\", res => {\n      this.error = `Error deleting freet ${res.freetName}`;\n      this.clearMessages();\n      this.loadFreets();\n    });\n\n    eventBus.$on(\"reload_following\", () => {\n        this.getFollowing();\n\n    });\n  },\n\n  mounted: function() {\n    this.getFollowing();\n    this.loadFreets();\n  },\n\n  methods: {\n    loadFreets: function() {\n      axios\n      .get(`/api/freets`).then(response => {\n        var unsorted_freets = response.data;\n        unsorted_freets.reverse();\n        var authenticated = this.$cookie.get('fritter-auth');\n        if (authenticated){\n         var mapped_following = this.following.map(u => u.id);\n          var final = [];\n          unsorted_freets.forEach(freet => {\n                    if (mapped_following.includes(freet.creatorUserID)){\n                        final.unshift(freet); // if following user, push freet to front\n                    } else {\n                        final.push(freet);\n                    }\n                })\n        this.freets = final;\n\n        }\n        else {\n          this.freets = unsorted_freets;\n        }\n        \n      })\n    },\n\n    getFollowing: function() {\n        const bodyContent = {};\n        axios\n          .get(\"/api/follows/following\", bodyContent)\n          .then((res) => {\n            this.following = res.data.following.map(u => u);//.followedID);\n        }).catch(() => {\n          // this.error = \"An unexpected error occured. Please sign in again.\";\n          // this.clearMessages();\n          eventBus.$emit(\"trigger-signout\", true);\n          \n        })},\n\n    clearMessages: function() {\n      setInterval(() => {\n        this.success = \"\";\n        this.error = \"\";\n      }, 5000);\n    }\n  }\n};\n</script>\n\n"]}]}