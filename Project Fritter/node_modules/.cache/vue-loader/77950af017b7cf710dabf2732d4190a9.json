{"remainingRequest":"/Users/murphyren/Desktop/170/AS/a5-sanjass-zhengren/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/murphyren/Desktop/170/AS/a5-sanjass-zhengren/src/components/CreateFreetForm.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/murphyren/Desktop/170/AS/a5-sanjass-zhengren/src/components/CreateFreetForm.vue","mtime":1604852775672},{"path":"/Users/murphyren/Desktop/170/AS/a5-sanjass-zhengren/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/murphyren/Desktop/170/AS/a5-sanjass-zhengren/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/murphyren/Desktop/170/AS/a5-sanjass-zhengren/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/murphyren/Desktop/170/AS/a5-sanjass-zhengren/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCB7IGV2ZW50QnVzIH0gZnJvbSAiLi4vbWFpbiI7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkNyZWF0ZUZyZWV0Rm9ybSIsCgogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBlcnJvcnM6IFtdLAogICAgICBzdWNjZXNzOiAiIiwKICAgICAgZnJlZXROYW1lOiAiIiwKICAgIH07CiAgfSwKCiAgbWV0aG9kczogewogICAgY3JlYXRlRnJlZXQ6IGZ1bmN0aW9uKCkgewogICAgICB0aGlzLmVycm9ycyA9IFtdOwoKICAgICAgaWYgKHRoaXMuZnJlZXROYW1lID09PSAiIikgewogICAgICAgIHRoaXMuZXJyb3JzLnB1c2goIkZyZWV0IG5hbWUgaXMgcmVxdWlyZWQiKTsKICAgICAgICB0aGlzLmNsZWFyTWVzc2FnZXMoKTsKCiAgICAgIH0gZWxzZSB7CiAgICAgICAgaWYgKHRoaXMuZnJlZXROYW1lLmxlbmd0aCA+IDE0MCkgewogICAgICAgICAgICB0aGlzLmVycm9ycy5wdXNoKCJGcmVldCBzaG91bGQgYmUgbm8gbG9uZ2VyIHRoYW4gMTQwIHdvcmRzISIpOwogICAgICAgICAgICB0aGlzLmNsZWFyTWVzc2FnZXMoKTsKICAgICAgICB9CiAgICAgICAgY29uc3QgYm9keUNvbnRlbnQgPSB7IGZyZWV0TmFtZTogdGhpcy5mcmVldE5hbWV9OwogICAgICAgIGF4aW9zCiAgICAgICAgICAucG9zdChgL2FwaS9mcmVldHNgLCBib2R5Q29udGVudCkKICAgICAgICAgIC50aGVuKGZyZWV0ID0+IHsKICAgICAgICAgICAgLy8gaGFuZGxlIHN1Y2Nlc3MKICAgICAgICAgICAgdGhpcy5zdWNjZXNzID0gIkZyZWV0IGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5ISI7CiAgICAgICAgICAgIGV2ZW50QnVzLiRlbWl0KCJjcmVhdGUtZnJlZXQtc3VjY2VzcyIsIGZyZWV0KTsKICAgICAgICAgIH0pCiAgICAgICAgICAuY2F0Y2goZXJyID0+IHsKICAgICAgICAgICAgLy8gaGFuZGxlIGVycm9yCiAgICAgICAgICAgIHRoaXMuZXJyb3JzLnB1c2goZXJyLnJlc3BvbnNlLmRhdGEuZXJyb3IpOwogICAgICAgICAgfSkKICAgICAgICAgIC50aGVuKCgpID0+IHsKICAgICAgICAgICAgLy8gYWx3YXlzIGV4ZWN1dGVkCiAgICAgICAgICAgIHRoaXMucmVzZXRGb3JtKCk7CiAgICAgICAgICAgIHRoaXMuY2xlYXJNZXNzYWdlcygpOwogICAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCgogICAgcmVzZXRGb3JtOiBmdW5jdGlvbigpIHsKICAgICAgdGhpcy5mcmVldE5hbWUgPSAiIjsKICAgIH0sCgogICAgY2xlYXJNZXNzYWdlczogZnVuY3Rpb24oKSB7CiAgICAgIHNldEludGVydmFsKCgpID0+IHsKICAgICAgICB0aGlzLmVycm9ycyA9IFtdOwogICAgICAgIHRoaXMuc3VjY2VzcyA9ICIiOwogICAgICB9LCA1MDAwKTsKICAgIH0KICB9Cn07Cg=="},{"version":3,"sources":["CreateFreetForm.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6BA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"CreateFreetForm.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"subcontainer\">\n    <div class=\"header primary-header\">\n      Create Freet\n    </div>\n    <div class=\"freet-form-container\">\n      <!-- the submit event will no longer reload the page -->\n      <form id='create-freet' v-on:submit.prevent='createFreet' method='post'>\n\n        <input id='name' v-model.trim='freetName' type='text' name='freetName'  placeholder=\"Enter Freet Name\">\n\n        <input  type='submit' value=\"Create Freet\" id=\"createFreet\" class=\"smallbutton\">\n\n        <div v-if='success' class=\"success-message\">\n          {{ success }}\n        </div>\n\n        <div v-if='errors.length' class=\"error-message\">\n          <b>Please correct the following error(s):</b>\n          <ul>\n            <li v-for='error in errors' v-bind:key='error.id'>{{ error }}</li>\n          </ul>\n        </div>\n      </form>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport { eventBus } from \"../main\";\n\nexport default {\n  name: \"CreateFreetForm\",\n\n  data() {\n    return {\n      errors: [],\n      success: \"\",\n      freetName: \"\",\n    };\n  },\n\n  methods: {\n    createFreet: function() {\n      this.errors = [];\n\n      if (this.freetName === \"\") {\n        this.errors.push(\"Freet name is required\");\n        this.clearMessages();\n\n      } else {\n        if (this.freetName.length > 140) {\n            this.errors.push(\"Freet should be no longer than 140 words!\");\n            this.clearMessages();\n        }\n        const bodyContent = { freetName: this.freetName};\n        axios\n          .post(`/api/freets`, bodyContent)\n          .then(freet => {\n            // handle success\n            this.success = \"Freet created successfully!\";\n            eventBus.$emit(\"create-freet-success\", freet);\n          })\n          .catch(err => {\n            // handle error\n            this.errors.push(err.response.data.error);\n          })\n          .then(() => {\n            // always executed\n            this.resetForm();\n            this.clearMessages();\n          });\n      }\n    },\n\n    resetForm: function() {\n      this.freetName = \"\";\n    },\n\n    clearMessages: function() {\n      setInterval(() => {\n        this.errors = [];\n        this.success = \"\";\n      }, 5000);\n    }\n  }\n};\n</script>\n"]}]}