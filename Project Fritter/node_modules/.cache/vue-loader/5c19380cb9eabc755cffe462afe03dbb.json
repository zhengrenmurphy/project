{"remainingRequest":"/Users/murphyren/Desktop/170/AS/a5-sanjass-zhengren/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/murphyren/Desktop/170/AS/a5-sanjass-zhengren/src/components/UserProfile.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/murphyren/Desktop/170/AS/a5-sanjass-zhengren/src/components/UserProfile.vue","mtime":1604980618755},{"path":"/Users/murphyren/Desktop/170/AS/a5-sanjass-zhengren/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/murphyren/Desktop/170/AS/a5-sanjass-zhengren/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/murphyren/Desktop/170/AS/a5-sanjass-zhengren/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/murphyren/Desktop/170/AS/a5-sanjass-zhengren/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBDaGFuZ2VVc2VyQ3JlZGVudGlhbHMgZnJvbSAiLi9DaGFuZ2VVc2VyQ3JlZGVudGlhbHMudnVlIjsKaW1wb3J0IEF1dGhvckZyZWV0TGlzdCBmcm9tICIuLi9jb21wb25lbnRzL0F1dGhvckZyZWV0TGlzdC52dWUiOwppbXBvcnQgU2lnbk91dCBmcm9tICIuL1NpZ25PdXQudnVlIjsKaW1wb3J0IERlbGV0ZUFjY291bnQgZnJvbSAiLi9EZWxldGVBY2NvdW50LnZ1ZSI7CmltcG9ydCBVc2VyTGlzdCBmcm9tICIuL1VzZXJMaXN0IjsKCmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCB7IGV2ZW50QnVzIH0gZnJvbSAiLi4vbWFpbiI7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIlVzZXJQcm9maWxlIiwKCiAgY29tcG9uZW50czogewogICAgQ2hhbmdlVXNlckNyZWRlbnRpYWxzLAogICAgQXV0aG9yRnJlZXRMaXN0LCAKICAgIFNpZ25PdXQsCiAgICBEZWxldGVBY2NvdW50LAogICAgVXNlckxpc3QKCiAgfSwKCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGlzU2lnbmVkSW46IGZhbHNlLAogICAgICBtZXNzYWdlczogW10sCiAgICAgIGVycm9yIDogIiIsCiAgICAgIGZvbGxvd2VyczogW10sCiAgICAgIGZvbGxvd2luZzogW10KICAgIH07CiAgfSwKCiAgY3JlYXRlZDogZnVuY3Rpb24oKSB7CiAgICBsZXQgYXV0aGVudGljYXRlZCA9IHRoaXMuJGNvb2tpZS5nZXQoJ2ZyaXR0ZXItYXV0aCcpOwogICAgaWYgKGF1dGhlbnRpY2F0ZWQpIHsKICAgICAgdGhpcy5pc1NpZ25lZEluID0gdHJ1ZTsKICAgICAgdGhpcy5nZXRGb2xsb3dpbmcoKTsKICAgICAgdGhpcy5nZXRGb2xsb3dlcnMoKTsKICAgIH0KCgoKICAgIGV2ZW50QnVzLiRvbigiY2hhbmdlLXVzZXJuYW1lLXN1Y2Nlc3MiLCAoKSA9PiB7CiAgICAgIHRoaXMuJGNvb2tpZS5zZXQoJ2ZyaXR0ZXItYXV0aCcsICcnKTsKICAgICAgdGhpcy5pc1NpZ25lZEluID0gZmFsc2U7CiAgICAgIHRoaXMubWVzc2FnZXMucHVzaChgWW91ciB1c2VybmFtZSB3YXMgc3VjY2Vzc2Z1bGx5IGNoYW5nZWQhIFBsZWFzZSBzaWduIGluIGFnYWluLmApOwogICAgICB0aGlzLmNsZWFyTWVzc2FnZXMoKTsKCiAgICB9KTsKCiAgICBldmVudEJ1cy4kb24oImNoYW5nZS1wYXNzd29yZC1zdWNjZXNzIiwgKCkgPT4gewogICAgICB0aGlzLiRjb29raWUuc2V0KCdmcml0dGVyLWF1dGgnLCAnJyk7CiAgICAgIHRoaXMuaXNTaWduZWRJbiA9IGZhbHNlOwogICAgICB0aGlzLm1lc3NhZ2VzLnB1c2goYFlvdXIgcGFzc3dvcmQgd2FzIHN1Y2Nlc3NmdWxseSBjaGFuZ2VkISBQbGVhc2Ugc2lnbiBpbiBhZ2Fpbi5gKTsKICAgICAgdGhpcy5jbGVhck1lc3NhZ2VzKCk7CgogICAgfSk7CgogICAgZXZlbnRCdXMuJG9uKCJzaWdub3V0LXN1Y2Nlc3MiLCAoKSA9PiB7CiAgICAgIHRoaXMuJGNvb2tpZS5zZXQoJ2ZyaXR0ZXItYXV0aCcsICcnKTsKICAgICAgdGhpcy5pc1NpZ25lZEluID0gZmFsc2U7CiAgICAgIC8vIHRoaXMubWVzc2FnZXMucHVzaCgiWW91IGhhdmUgYmVlbiBzaWduZWQgb3V0ISIpOwogICAgICAvLyB0aGlzLmNsZWFyTWVzc2FnZXMoKTsKICAgIH0pOwoKICAgIGV2ZW50QnVzLiRvbigicmVsb2FkX2ZvbGxvd2VycyIsICgpID0+IHsKICAgICAgICB0aGlzLmdldEZvbGxvd2VycygpOwoKICAgIH0pOwoKICAgIGV2ZW50QnVzLiRvbigicmVsb2FkX2ZvbGxvd2luZyIsICgpID0+IHsKICAgICAgICB0aGlzLmdldEZvbGxvd2luZygpOwoKICAgIH0pOwogIH0sCgogIG1ldGhvZHM6IHsKCiAgICBnZXRGb2xsb3dpbmc6IGZ1bmN0aW9uKCkgewogICAgICAgIGNvbnN0IGJvZHlDb250ZW50ID0ge307CiAgICAgICAgYXhpb3MKICAgICAgICAgIC5nZXQoIi9hcGkvZm9sbG93cy9mb2xsb3dpbmciLCBib2R5Q29udGVudCkKICAgICAgICAgIC50aGVuKChyZXMpID0+IHsKICAgICAgICAgICAgdGhpcy5mb2xsb3dpbmcgPSByZXMuZGF0YS5mb2xsb3dpbmcubWFwKHUgPT4gdSk7Ly8uZm9sbG93ZWRJRCk7CiAgICAgICAgfSkuY2F0Y2goKCkgPT4gewogICAgICAgICAgCiAgICAgICAgfSl9LAoKICAgIGdldEZvbGxvd2VyczogZnVuY3Rpb24oKSB7CiAgICAgIGNvbnN0IGJvZHlDb250ZW50ID0ge307CiAgICAgIGF4aW9zCiAgICAgICAgLmdldCgiL2FwaS9mb2xsb3dzL2ZvbGxvd2VycyIsIGJvZHlDb250ZW50KQogICAgICAgIC50aGVuKChyZXMpID0+IHsKICAgICAgICAgIHRoaXMuZm9sbG93ZXJzID0gcmVzLmRhdGEuZm9sbG93ZXJzLm1hcCh1ID0+IHUpOy8vLmZvbGxvd2VySUQpOwogICAgICAgIH0pLmNhdGNoKCgpID0+IHsKICAgICAgICAgIHRoaXMuZXJyb3IgPSAiQW4gdW5leHBlY3RlZCBlcnJvciBvY2N1cmVkLiBQbGVhc2Ugc2lnbiBpbiBhZ2Fpbi4iOwogICAgICAgICAgdGhpcy5jbGVhck1lc3NhZ2VzKCk7CiAgICAgICAgICBldmVudEJ1cy4kZW1pdCgidHJpZ2dlci1zaWdub3V0IiwgdHJ1ZSk7CiAgICAgICAgfSkKICAgICAgfSwKCiAgICBjbGVhck1lc3NhZ2VzOiBmdW5jdGlvbigpIHsKICAgICAgc2V0SW50ZXJ2YWwoKCkgPT4gewogICAgICAgIHRoaXMubWVzc2FnZXMgPSBbXTsKICAgICAgfSwgNTAwMCk7CiAgICB9LAoKICB9LAoKICBiZWZvcmVEZXN0cm95KCkgewogICAgZXZlbnRCdXMuJG9mZigncmVsb2FkX2ZvbGxvd2luZycpOwogICAgZXZlbnRCdXMuJG9mZigncmVsb2FkX2ZvbGxvd2VycycpOwogICB9LAp9Owo="},{"version":3,"sources":["UserProfile.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6EA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA","file":"UserProfile.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class = \"main4\" id=\"user-profile\">\n    <div v-if='error' class=\"error-message\">\n        {{ error }}\n      </div>\n      <div v-if='messages.length' class=\"success-message\" style=\"text-align:center;\">\n      <div v-for='message in messages' v-bind:key='message.id'>{{ message }}</div>\n    </div>\n\n    <div v-if=\"isSignedIn\" >\n      <div class=\"small-headline-container\">\n        <!-- Signed in as <i>{{this.$cookie.get('fritter-auth')}} </i> -->\n        <div style=\"text-align: center; margin:10px\"> Signed in as <i>{{this.$cookie.get('fritter-auth')}} </i></div>\n        <SignOut/>\n        <b-navbar-item class = \"aaa\"  tag=\"router-link\" :to=\"{ path: '/myfreets' }\">\n                <div class = \"aaa2\">Click here to see my freets </div>\n        </b-navbar-item>\n              \n              \n      </div>\n      \n      <div class=\"form-container\">\n      <div style=\"text-align: center; margin:20px; color: black; font-size:2em \"> Account settings</div>\n\n      <div class=\"four wide column\">\n        <img class=\"ui tiny avatar image\" src=\"../../imgs/2.png\" width=200px height=auto>\n      </div>\n      <ChangeUserCredentials/>\n      <div class = \"danger\">\n      Danger zone<br>Warning: This action is not recoverable\n      <DeleteAccount/>\n      </div>\n      \n      </div>\n      \n      \n\n      <div class=\"follows-container\" >\n\n        <div v-if=\"following.length\" >\n          <UserList \n          v-bind:users=\"following\"\n          v-bind:title=\"'Following'\"/>\n        </div>\n\n        <div v-if=\"followers.length\" >\n          <UserList \n          v-bind:users=\"followers\"\n          v-bind:title=\"'Followers'\"/>\n        </div>\n      </div>\n\n      <!-- <div class=\"form-container\">\n        <AuthorFreetList/>\n      </div> -->\n\n    </div>\n    <div v-else class=\"form-container2\">\n          <template >\n            <b-navbar-item tag=\"router-link\" :to=\"{ path: '/account' }\">\n                    <a class=\"button is-light\">\n                        <strong>Please sign in or sign up</strong>\n                    </a>\n\n          </b-navbar-item>\n                        <img class=\"ui tiny avatar image\" src=\"https://cdn.shopify.com/s/files/1/0153/0623/products/Palm_Springs_Wallpaper_in_Green_and_Pink_from_the_Palm_Springs_Collection_by_Mind_the_Gap-1_1024x1024.jpg?v=1571712906\" >\n\n        </template>\n      \n\n    </div>\n    \n\n  </div>\n</template>\n\n<script>\nimport ChangeUserCredentials from \"./ChangeUserCredentials.vue\";\nimport AuthorFreetList from \"../components/AuthorFreetList.vue\";\nimport SignOut from \"./SignOut.vue\";\nimport DeleteAccount from \"./DeleteAccount.vue\";\nimport UserList from \"./UserList\";\n\nimport axios from \"axios\";\nimport { eventBus } from \"../main\";\n\nexport default {\n  name: \"UserProfile\",\n\n  components: {\n    ChangeUserCredentials,\n    AuthorFreetList, \n    SignOut,\n    DeleteAccount,\n    UserList\n\n  },\n\n  data() {\n    return {\n      isSignedIn: false,\n      messages: [],\n      error : \"\",\n      followers: [],\n      following: []\n    };\n  },\n\n  created: function() {\n    let authenticated = this.$cookie.get('fritter-auth');\n    if (authenticated) {\n      this.isSignedIn = true;\n      this.getFollowing();\n      this.getFollowers();\n    }\n\n\n\n    eventBus.$on(\"change-username-success\", () => {\n      this.$cookie.set('fritter-auth', '');\n      this.isSignedIn = false;\n      this.messages.push(`Your username was successfully changed! Please sign in again.`);\n      this.clearMessages();\n\n    });\n\n    eventBus.$on(\"change-password-success\", () => {\n      this.$cookie.set('fritter-auth', '');\n      this.isSignedIn = false;\n      this.messages.push(`Your password was successfully changed! Please sign in again.`);\n      this.clearMessages();\n\n    });\n\n    eventBus.$on(\"signout-success\", () => {\n      this.$cookie.set('fritter-auth', '');\n      this.isSignedIn = false;\n      // this.messages.push(\"You have been signed out!\");\n      // this.clearMessages();\n    });\n\n    eventBus.$on(\"reload_followers\", () => {\n        this.getFollowers();\n\n    });\n\n    eventBus.$on(\"reload_following\", () => {\n        this.getFollowing();\n\n    });\n  },\n\n  methods: {\n\n    getFollowing: function() {\n        const bodyContent = {};\n        axios\n          .get(\"/api/follows/following\", bodyContent)\n          .then((res) => {\n            this.following = res.data.following.map(u => u);//.followedID);\n        }).catch(() => {\n          \n        })},\n\n    getFollowers: function() {\n      const bodyContent = {};\n      axios\n        .get(\"/api/follows/followers\", bodyContent)\n        .then((res) => {\n          this.followers = res.data.followers.map(u => u);//.followerID);\n        }).catch(() => {\n          this.error = \"An unexpected error occured. Please sign in again.\";\n          this.clearMessages();\n          eventBus.$emit(\"trigger-signout\", true);\n        })\n      },\n\n    clearMessages: function() {\n      setInterval(() => {\n        this.messages = [];\n      }, 5000);\n    },\n\n  },\n\n  beforeDestroy() {\n    eventBus.$off('reload_following');\n    eventBus.$off('reload_followers');\n   },\n};\n</script>"]}]}