{"remainingRequest":"/Users/murphyren/Desktop/170/AS/a5-sanjass-zhengren/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/murphyren/Desktop/170/AS/a5-sanjass-zhengren/src/components/OtherUser/OtherUserProfileHeader.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/murphyren/Desktop/170/AS/a5-sanjass-zhengren/src/components/OtherUser/OtherUserProfileHeader.vue","mtime":1604946767118},{"path":"/Users/murphyren/Desktop/170/AS/a5-sanjass-zhengren/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/murphyren/Desktop/170/AS/a5-sanjass-zhengren/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/murphyren/Desktop/170/AS/a5-sanjass-zhengren/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/murphyren/Desktop/170/AS/a5-sanjass-zhengren/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCB7IGV2ZW50QnVzIH0gZnJvbSAiLi4vLi4vbWFpbiI7CgogIGV4cG9ydCBkZWZhdWx0IHsKICAgIG5hbWU6ICdPdGhlclVzZXJQcm9maWxlSGVhZGVyJywKICAgIGRhdGEoKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIGVycm9yczogW10sCiAgICAgICAgICBmb2xsb3dpbmcgOiBbXSwKICAgICAgICAgIGlzU2lnbmVkSW4gOiBmYWxzZSwKICAgICAgICB9CiAgICB9LAoKICAgIHByb3BzOiB7CiAgICAgIHVzZXI6IHsKICAgICAgICB0eXBlOiBPYmplY3QsCiAgICAgICAgcmVxdWlyZWQ6IHRydWUKICAgICAgfQogICAgfSwKICAgIGNyZWF0ZWQ6IGZ1bmN0aW9uKCkgewogICAgICB0aGlzLmdldEZvbGxvd2luZygpOwogICAgICBsZXQgYXV0aGVudGljYXRlZCA9IHRoaXMuJGNvb2tpZS5nZXQoJ2ZyaXR0ZXItYXV0aCcpOwogICAgICBpZiAoYXV0aGVudGljYXRlZCkgewogICAgICAgIHRoaXMuaXNTaWduZWRJbiA9IHRydWU7CiAgICAgIH0KCiAgICB9LAogICAgbWV0aG9kczogewogICAgICBnZXRVc2VySWQgKHVzZXJuYW1lKSB7CiAgICAgICAgYXhpb3MuZ2V0KGAvYXBpL3VzZXJzLyR7dXNlcm5hbWV9YCkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgICB0aGlzLnVzZXJfaWQgPSByZXNwb25zZS5kYXRhLnVzZXIuaWQ7CiAgICAgICAgfSkKCiAgICAgIH0sCgoKICAgICAgZm9sbG93ICh1c2VySWQpewogICAgICAgIGNvbnN0IGJvZHlDb250ZW50ID0geyBuYW1lOiB1c2VySWR9OwogICAgICAgIGF4aW9zCiAgICAgICAgICAucG9zdCgiL2FwaS9mb2xsb3dzLyIsIGJvZHlDb250ZW50KQogICAgICAgICAgLnRoZW4oKCkgPT4gewogICAgICAgICAgICAvLyBoYW5kbGUgc3VjY2VzcwogICAgICAgICAgICB0aGlzLmZvbGxvd2luZy5wdXNoKHVzZXJJZCk7CiAgICAgICAgICAgIGV2ZW50QnVzLiRlbWl0KCdmb2xsb3ctc3VjY2VzcycsIHVzZXJJZCk7CiAgICAgICAgICAgIGV2ZW50QnVzLiRlbWl0KCdyZWxvYWRfZm9sbG93ZXJzJywgdHJ1ZSk7CiAgICAgICAgICAgIGV2ZW50QnVzLiRlbWl0KCdyZWxvYWRfZm9sbG93aW5nJywgdHJ1ZSk7CgogICAgICAgICAgfSkKICAgICAgfSwKCiAgICAgIGlzRm9sbG93aW5nICh1c2VySWQpIHsKICAgICAgICAKICAgICAgICBmb3IgKGNvbnN0IGZvbGxvd0lkIG9mIHRoaXMuZm9sbG93aW5nKSB7CgogICAgICAgICAgaWYgKHVzZXJJZCA9PT0gZm9sbG93SWQpIHsKICAgICAgICAgICAgcmV0dXJuIHRydWUKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHJldHVybiBmYWxzZQogICAgICB9LAoKICAgICAgZ2V0Rm9sbG93aW5nICgpIHsKICAgICAgICBjb25zdCBib2R5Q29udGVudCA9IHt9OwogICAgICAgIGF4aW9zCiAgICAgICAgICAuZ2V0KCIvYXBpL2ZvbGxvd3MvZm9sbG93aW5nIiwgYm9keUNvbnRlbnQpCiAgICAgICAgICAudGhlbigocmVzKSA9PiB7CiAgICAgICAgICAgIHRoaXMuZm9sbG93aW5nID0gcmVzLmRhdGEuZm9sbG93aW5nLm1hcCh1ID0+IHUuaWQpOwogICAgICAgICAgfSk7CiAgICAgICAgICAKICAgICAgfSwKICAgICAgdW5Gb2xsb3cgKHVzZXJJZCl7CiAgICAgICAgY29uc3QgYm9keUNvbnRlbnQgPSB7IG5hbWU6IHVzZXJJZH07CiAgICAgICAgYXhpb3MKICAgICAgICAgIC5wdXQoIi9hcGkvZm9sbG93cy8iLCBib2R5Q29udGVudCkKICAgICAgICAgIC50aGVuKCgpID0+IHsKICAgICAgICAgICAgLy8gaGFuZGxlIHN1Y2Nlc3MKICAgICAgICAgICAgZXZlbnRCdXMuJGVtaXQoJ3VuZm9sbG93LXN1Y2Nlc3MnLCB1c2VySWQpOwogICAgICAgICAgICB2YXIgaW5kZXggPSB0aGlzLmZvbGxvd2luZy5pbmRleE9mKHVzZXJJZCk7CiAgICAgICAgICAgIGlmIChpbmRleCAhPT0gLTEpIHsKICAgICAgICAgICAgICB0aGlzLmZvbGxvd2luZy5zcGxpY2UoaW5kZXgsIDEpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGV2ZW50QnVzLiRlbWl0KCdyZWxvYWRfZm9sbG93ZXJzJywgdHJ1ZSk7CiAgICAgICAgICAgIGV2ZW50QnVzLiRlbWl0KCdyZWxvYWRfZm9sbG93aW5nJywgdHJ1ZSk7CgogICAgICAgICAgfSkKICAgICAgfSwKCgogICAgY2xlYXJNZXNzYWdlczogZnVuY3Rpb24oKSB7CiAgICAgIHNldEludGVydmFsKCgpID0+IHsKICAgICAgICB0aGlzLmVycm9ycyA9IFtdOwogICAgICB9LCA1MDAwKTsKICAgIH0KICAgIH0KICB9Cgo="},{"version":3,"sources":["OtherUserProfileHeader.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAyBA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA","file":"OtherUserProfileHeader.vue","sourceRoot":"src/components/OtherUser","sourcesContent":["<template>\n  <div class=\"freet-container2\">\n    <div class=\"ui grid container\">\n      <div class=\"four wide column\">\n        <img class=\"ui tiny avatar image\" src=\"../../../imgs/2.png\" width=200px height=auto>\n        <div class=\"user-info\">\n          <p> <b>Username:</b> {{user.name}}</p>\n          <p> <b>User Id: </b>{{user.id}} </p>\n        </div>\n      </div>\n        <div v-if=\"isSignedIn\" class=\"ui right floated horizontal list\" >\n          <button class=\"ui tiny primary button\" v-if=\"isFollowing(user.id)\" @click=\"unFollow(user.id)\">Unfollow</button>\n          <button class=\"ui tiny primary button\" v-else @click=\"follow(user.id)\">Follow</button>\n        </div>\n</div>\n  <div v-if='errors.length' class=\"error-message\" style=\"width: 250px;\">\n      <b>Please correct the following error(s):</b>\n      <ul>\n        <li v-for='error in errors' v-bind:key='error.id'>{{ error }}</li>\n      </ul>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport { eventBus } from \"../../main\";\n\n  export default {\n    name: 'OtherUserProfileHeader',\n    data() {\n        return {\n          errors: [],\n          following : [],\n          isSignedIn : false,\n        }\n    },\n\n    props: {\n      user: {\n        type: Object,\n        required: true\n      }\n    },\n    created: function() {\n      this.getFollowing();\n      let authenticated = this.$cookie.get('fritter-auth');\n      if (authenticated) {\n        this.isSignedIn = true;\n      }\n\n    },\n    methods: {\n      getUserId (username) {\n        axios.get(`/api/users/${username}`).then(response => {\n          this.user_id = response.data.user.id;\n        })\n\n      },\n\n\n      follow (userId){\n        const bodyContent = { name: userId};\n        axios\n          .post(\"/api/follows/\", bodyContent)\n          .then(() => {\n            // handle success\n            this.following.push(userId);\n            eventBus.$emit('follow-success', userId);\n            eventBus.$emit('reload_followers', true);\n            eventBus.$emit('reload_following', true);\n\n          })\n      },\n\n      isFollowing (userId) {\n        \n        for (const followId of this.following) {\n\n          if (userId === followId) {\n            return true\n          }\n        }\n\n        return false\n      },\n\n      getFollowing () {\n        const bodyContent = {};\n        axios\n          .get(\"/api/follows/following\", bodyContent)\n          .then((res) => {\n            this.following = res.data.following.map(u => u.id);\n          });\n          \n      },\n      unFollow (userId){\n        const bodyContent = { name: userId};\n        axios\n          .put(\"/api/follows/\", bodyContent)\n          .then(() => {\n            // handle success\n            eventBus.$emit('unfollow-success', userId);\n            var index = this.following.indexOf(userId);\n            if (index !== -1) {\n              this.following.splice(index, 1);\n            }\n            eventBus.$emit('reload_followers', true);\n            eventBus.$emit('reload_following', true);\n\n          })\n      },\n\n\n    clearMessages: function() {\n      setInterval(() => {\n        this.errors = [];\n      }, 5000);\n    }\n    }\n  }\n\n</script>"]}]}