{"remainingRequest":"/Users/murphyren/Desktop/170/AS/a5-sanjass-zhengren/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/murphyren/Desktop/170/AS/a5-sanjass-zhengren/src/components/Freet.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/murphyren/Desktop/170/AS/a5-sanjass-zhengren/src/components/Freet.vue","mtime":1604854875466},{"path":"/Users/murphyren/Desktop/170/AS/a5-sanjass-zhengren/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/murphyren/Desktop/170/AS/a5-sanjass-zhengren/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/murphyren/Desktop/170/AS/a5-sanjass-zhengren/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/murphyren/Desktop/170/AS/a5-sanjass-zhengren/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCB7IGV2ZW50QnVzIH0gZnJvbSAiLi4vbWFpbiI7CgoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJmcmVldCIsCiAgY29tcG9uZW50czogewogICAgLy8gVE9ETwogIH0sCiAgcHJvcHM6IHsKICAgIGZyZWV0OiBPYmplY3QsCiAgICBpc0F1dGgxOiBCb29sZWFuLAogICAgLy8ga2V5OiBPYmplY3QsCiAgICAvLyB1c2UKICB9LAogIGRhdGEgKCkgewogICAgICByZXR1cm4gewogICAgICAgIGlzU2lnbmVkSW46IGZhbHNlLAogICAgICAgIGlzQXV0aCA6dGhpcy5pc0F1dGhvcigpLAogICAgICAgIGlzVXB2b3RlZCA6IGZhbHNlLAogICAgICAgIGVkaXRGcmVldFBvcHVwOiBmYWxzZSwgCiAgICAgICAgZWRpdEZyZWV0Rm9ybSA6IHsKICAgICAgICAgIGNvbnRlbnQgOiAnJywKICAgICAgICB9LAogICAgICAgIHZvdGVDb3VudHMgOiB0aGlzLmNvdW50Vm90ZXMoKSwKICAgICAgICBmcmVldENvbnRlbnQgOiB0aGlzLmZyZWV0LmNvbnRlbnQsCiAgICAgICAgZnJlZXRDdXJyZW50IDogdGhpcy5mcmVldCwKICAgICAgICAKICAgICAgICBhdXRob3IgOiB7CiAgICAgICAgICB1c2VybmFtZSA6IHRoaXMuZnJlZXQuY3JlYXRvclVzZXJJRCwKICAgICAgICB9LAogICAgICB9CiAgICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uKCkgewogIGxldCBhdXRoZW50aWNhdGVkID0gdGhpcy4kY29va2llLmdldCgnZnJpdHRlci1hdXRoJyk7CiAgaWYgKGF1dGhlbnRpY2F0ZWQpIHsKICAgIHRoaXMuaXNTaWduZWRJbiA9IHRydWU7CiAgfQp9LAogIAoKICBjb21wdXRlZCA6IHsKICAgIAogICAgCiAgfSwKCiAgbWV0aG9kcyA6IHsKICAgIGlzQXV0aG9yKCkgewogICAgICAvLyBwcm9ibGVtIHRoaXMgaXMgbmFtZSBub3QgSUQKICAgICAgY29uc3QgYm9keUNvbnRlbnQgPSB7IGNyZWF0b3JVc2VySUQ6IHRoaXMuZnJlZXQuY3JlYXRvclVzZXJJRH07CiAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMuZnJlZXQuY3JlYXRvclVzZXJJRCk7CiAgICAgIGF4aW9zLmdldChgL2FwaS9mcmVldHMvb3duZXI/aWQ9JHtib2R5Q29udGVudC5jcmVhdG9yVXNlcklEfWAsIGJvZHlDb250ZW50KQogICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgICAgLy8gY29uc29sZS5sb2cocmVzcG9uc2UuZGF0YSk7CiAgICAgICAgICB0aGlzLmlzQXV0aCA9IHJlc3BvbnNlLmRhdGE7CiAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuZGF0YTsKICAgICAgICB9KQoKICAgICAgCiAgICB9LAogICAgY291bnRWb3RlcygpIHsKICAgICAgY29uc3QgYm9keUNvbnRlbnQgPSB7IGlkIDogdGhpcy5mcmVldC5mcmVldElEfTsKICAgICAgYXhpb3MuZ2V0KGAvYXBpL3Vwdm90ZT9pZD0ke2JvZHlDb250ZW50LmlkfWAsIGJvZHlDb250ZW50KQogICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgICAgLy8gY29uc29sZS5sb2coJ2N1cnJlbnQgdm90ZXM6ICcsIHJlc3BvbnNlLmRhdGEudm90ZXMpOwogICAgICAgICAgdGhpcy52b3RlQ291bnRzID0gcmVzcG9uc2UuZGF0YTsKICAgICAgICB9KS5jYXRjaChlcnIgPT4gewogICAgICAgICAgZXZlbnRCdXMuJGVtaXQoImNvdW50LXZvdGVzLWVycm9yIiwgZXJyKTsKICAgICAgICB9KS50aGVuKCgpID0+IHsKICAgICAgICB9KTsKICAgIH0sCgogICAgdXBkYXRlRnJlZXQ6IGZ1bmN0aW9uKCkgewogICAgY29uc3QgYm9keSA9IHsgaWQgOiB0aGlzLmZyZWV0LmZyZWV0SUQsIGNvbnRlbnQgOiB0aGlzLmVkaXRGcmVldEZvcm0uY29udGVudCB9OwogICAgYXhpb3MKICAgICAgLnBhdGNoKGAvYXBpL2ZyZWV0c2AsIGJvZHkpCiAgICAgIC50aGVuKChyZXMpID0+IHsKICAgICAgICAvLyBoYW5kbGUgc3VjY2VzcwogICAgICAgIAogICAgICAgIHRoaXMuZnJlZXRDb250ZW50ID0gcmVzLmRhdGEuY29udGVudDsKICAgICAgICBldmVudEJ1cy4kZW1pdCgidXBkYXRlLWZyZWV0LXN1Y2Nlc3MiLCByZXMpOwogICAgICB9KQogICAgICAuY2F0Y2goZXJyID0+IHsKICAgICAgICAvLyBoYW5kbGUgZXJyb3IKICAgICAgICBldmVudEJ1cy4kZW1pdCgidXBkYXRlLWZyZWV0LWVycm9yIiwgZXJyKTsKICAgICAgfSkKICAgICAgLy8gcHJvYmxlbSAyIQogICAgICAudGhlbigoKSA9PiAoIHRoaXMuZWRpdEZyZWV0Rm9ybS5jb250ZW50ID0gIiIpKTsKICAgIH0sCgogICAgZGVsZXRlRnJlZXQ6IGZ1bmN0aW9uKCkgewogICAgY29uc3QgYm9keSA9IHsgaWQgOiB0aGlzLmZyZWV0LmZyZWV0SUR9OwogICAgYXhpb3MKICAgICAgLmRlbGV0ZShgL2FwaS9mcmVldHM/aWQ9JHtib2R5LmlkfWAsIGJvZHkpCiAgICAgIC50aGVuKCgpID0+IHsKICAgICAgICAvKiBlc2xpbnQtZGlzYWJsZSBuby1jb25zb2xlICovCiAgICAgICAgY29uc29sZS5sb2codGhpcy5mcmVldCk7CiAgICAgICAgZXZlbnRCdXMuJGVtaXQoImRlbGV0ZS1mcmVldC1zdWNjZXNzIiwgdGhpcy5mcmVldCk7CiAgICAgICAgdGhpcy5mcmVldEN1cnJlbnQgPSB7fQogICAgICB9KQogICAgICAuY2F0Y2goZXJyID0+IHsKICAgICAgICBldmVudEJ1cy4kZW1pdCgiZGVsZXRlLWZyZWV0LWVycm9yIiwgZXJyKTsKICAgICAgfSkudGhlbigoKSA9PiB7CiAgICAgIH0pOwogICAgICB9LAoKCiAgICBvblVwdm90ZTogZnVuY3Rpb24oKSB7CiAgICAgIC8vIGNvbnNvbGUubG9nKCd1cHZvdGUnKTsKICAgICAgLy8gZXZ0LnByZXZlbnREZWZhdWx0KCk7CiAgICAgIGNvbnN0IGJvZHkgPSB7IGlkIDogdGhpcy5mcmVldC5mcmVldElEIH07CiAgICAgIGF4aW9zLnBvc3QoYC9hcGkvdXB2b3RlYCwgYm9keSkKICAgICAgICAudGhlbigocmVzKSA9PiB7CiAgICAgICAgICB0aGlzLmlzVXB2b3RlZCA9IHRydWU7CiAgICAgICAgICB0aGlzLnZvdGVDb3VudHMgPSB0aGlzLmNvdW50Vm90ZXMoKTsKICAgICAgICAgIC8qIGVzbGludC1kaXNhYmxlIG5vLWNvbnNvbGUgKi8KICAgICAgICAgIGNvbnNvbGUubG9nKHJlcyk7CiAgICAgICAgICBldmVudEJ1cy4kZW1pdCgidXB2b3RlLXN1Y2Nlc3MiLCByZXMpOwogICAgICAgICAgLy8gdGhpcy5jb3VudFZvdGVzKCk7CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goZXJyID0+IHsKICAgICAgICAgIGV2ZW50QnVzLiRlbWl0KCJ1cHZvdGUtZXJyb3IiLCBlcnIpOwogICAgICAgIH0pLnRoZW4oKCkgPT4gewogICAgICAgIH0pOwogICAgfSwKCiAgICBvblVuZG9VcHZvdGU6IGZ1bmN0aW9uKCkgewogICAgICBjb25zdCBib2R5Q29udGVudCA9IHsgaWQgOiB0aGlzLmZyZWV0LmZyZWV0SUQgfTsKICAgICAgYXhpb3MucGF0Y2goIi9hcGkvdXB2b3RlIiwgYm9keUNvbnRlbnQpCiAgICAgICAgLnRoZW4oKCkgPT4gewogICAgICAgICAgdGhpcy5pc1Vwdm90ZWQgPSBmYWxzZTsKICAgICAgICAgIHRoaXMudm90ZUNvdW50cyA9IHRoaXMuY291bnRWb3RlcygpOwogICAgICAgICAgLyogZXNsaW50LWRpc2FibGUgbm8tY29uc29sZSAqLwogICAgICAgICAgY29uc29sZS5sb2codGhpcy5mcmVldCk7CiAgICAgICAgICBldmVudEJ1cy4kZW1pdCgib251cHZvdGUtc3VjY2VzcyIsIHRoaXMuZnJlZXQpOwogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKGVyciA9PiB7CiAgICAgICAgICBldmVudEJ1cy4kZW1pdCgib251cHZvdGUtZXJyb3IiLCBlcnIpOwogICAgICAgIH0pLnRoZW4oKCkgPT4gewogICAgICAgIH0pOwogICAgfSwgCgogICAgcmVmcmVldDogZnVuY3Rpb24oKSB7CiAgICAgIC8vIFRPRE86IGRpc3BsYXkgYnV0dG9uIGlmZiBmcmVldCBub3QgaW4gdXNlci5mcmVldHMKICAgICAgCiAgICAgIGNvbnN0IGJvZHlDb250ZW50ID0geyBpZCA6IHRoaXMuZnJlZXQuZnJlZXRJRCB9OwogICAgICBheGlvcy5wb3N0KCcvYXBpL3JlZnJlZXRzJywgYm9keUNvbnRlbnQpCiAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgICAvKiBlc2xpbnQtZGlzYWJsZSBuby1jb25zb2xlICovCiAgICAgICAgICBjb25zb2xlLmxvZyhSZXNwb25zZSk7CiAgICAgICAgICBldmVudEJ1cy4kZW1pdCgiY3JlYXRlLXJlZnJlZXQtc3VjY2VzcyIsIHJlc3BvbnNlKTsKICAgICAgICB9KQogICAgICAgIC5jYXRjaChlcnIgPT4gewogICAgICAgICAgZXZlbnRCdXMuJGVtaXQoInJlZnJlZXQtZXJyb3IiLCBlcnIpOwogICAgICAgIH0pLnRoZW4oKCkgPT4gewogICAgICAgIH0pOwogICAgfSwKCiAgICBnb1RvUHJvZmlsZTogZnVuY3Rpb24gKHNlbGVjdGVkKSB7CiAgICAgICAgLy8gd2hlbiB0aGUgaGFzaCBwcm9wIGNoYW5nZXMsIHRoaXMgZnVuY3Rpb24gd2lsbCBiZSBmaXJlZC4KICAgICAgICBsZXQgc2lnbmVkVXNlcm5hbWUgPSB0aGlzLiRjb29raWUuZ2V0KCdmcml0dGVyLWF1dGgnKTsKICAgICAgICBpZiAoc2VsZWN0ZWQgPT09IHNpZ25lZFVzZXJuYW1lICYmIHNlbGVjdGVkKXsKICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKGAvcHJvZmlsZWApOwogICAgICAgICAgCgogICAgICAgIH0gZWxzZSBpZiAodGhpcy5zZWxlY3RlZCAhPT0gc2lnbmVkVXNlcm5hbWUgJiYgc2VsZWN0ZWQpewogICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goYC8ke3NlbGVjdGVkfWApOwogICAgICAgIH0KICAgICAgICAgCiAgICAgIH0KCgoKCgoKCgoKCgogIH0sCgoKCgp9Cgo="},{"version":3,"sources":["Freet.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyDA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;;;;;;;;;;;;AAYA;;;;;AAKA","file":"Freet.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"freet-container\">\n    <div v-if=\"isAuth&&freet.isRefreet\" class=\"freet-name\"> freet {{ freet.freetID }} from<router-link :to=\"`/${freet.name}`\" class = \"aaa\">\n\n                Your\n        </router-link> </div>\n    <div v-if=\"isAuth&&!freet.isRefreet\" class=\"freet-name\"> freet {{ freet.freetID }} from<router-link :to=\"`/${freet.name}` \" class = \"aaa\">\n\n                You\n        </router-link> </div>\n    <div v-if=\"!isAuth&&freet.isRefreet\" class=\"freet-name\"> refreet {{ freet.freetID }} from <router-link :to=\"`/${freet.name}`\" class = \"aaa\">\n\n                {{ freet.name }}\n        </router-link> </div>\n    <div v-if=\"!isAuth&&!freet.isRefreet\" class=\"freet-name\"> refreet {{ freet.freetID }} from <router-link :to=\"`/${freet.name}`\" class = \"aaa\">\n\n                {{ freet.name }}\n        </router-link></div>\n\n    <div class=\"freet-content\">\n      \n\n\n    <p>{{ freetContent }}</p></div>\n\n    <button class=\"smallbutton\" v-if=\"!isUpvoted&&isSignedIn\" \n                v-on:click=\"onUpvote\"\n                variant=\"info\">Upvote</button>\n\n    <button class=\"smallbutton\" v-else-if=\"isUpvoted\" \n                v-on:click=\"onUndoUpvote\"\n                variant=\"info\">Undo Upvote</button>\n    <button class=\"smallbutton\" v-if=\"isSignedIn\" \n                v-on:click=\"refreet\"\n                variant=\"info\">Refreet</button>\n    <div v-if=\"freet.isRefreet\"> It is a refreet. </div>\n    <div v-if=isSignedIn> <p>It has been upvoted for {{voteCounts}} time(s).</p></div>\n    <!-- <p># author? : {{isAuth}}</p> -->\n    <!-- <div v-if=\"isAuth&&freet.isRefreet\"> It is your refreets, you could only delete it. </div>\n    <div v-if=\"isAuth&&!freet.isRefreet\"> It is your freets, you could edit or delete it. </div> -->\n\n\n    \n    \n      \n    \n    <div class=\"freet-item-actions\">\n      <input v-if=\"isAuth&&this.freet.isRefreet!=1\" class=\"edit\" v-model='editFreetForm.content' type=\"text\" name=\"content\" placeholder=\"New Content\">\n      <button class=\"smallbutton\" v-if=\"isAuth&&this.freet.isRefreet!=1\" v-on:click=\"updateFreet\">Update</button>\n      <button class=\"smallbutton\" v-if=\"isAuth\" v-on:click=\"deleteFreet\">Delete</button>\n\n    </div>\n  </div>\n</template>\n\n\n<script>\n  import axios from \"axios\";\n  import { eventBus } from \"../main\";\n\n\n  export default {\n    name: \"freet\",\n    components: {\n      // TODO\n    },\n    props: {\n      freet: Object,\n      isAuth1: Boolean,\n      // key: Object,\n      // use\n    },\n    data () {\n        return {\n          isSignedIn: false,\n          isAuth :this.isAuthor(),\n          isUpvoted : false,\n          editFreetPopup: false, \n          editFreetForm : {\n            content : '',\n          },\n          voteCounts : this.countVotes(),\n          freetContent : this.freet.content,\n          freetCurrent : this.freet,\n          \n          author : {\n            username : this.freet.creatorUserID,\n          },\n        }\n      },\n    created: function() {\n    let authenticated = this.$cookie.get('fritter-auth');\n    if (authenticated) {\n      this.isSignedIn = true;\n    }\n  },\n    \n\n    computed : {\n      \n      \n    },\n\n    methods : {\n      isAuthor() {\n        // problem this is name not ID\n        const bodyContent = { creatorUserID: this.freet.creatorUserID};\n        // console.log(this.freet.creatorUserID);\n        axios.get(`/api/freets/owner?id=${bodyContent.creatorUserID}`, bodyContent)\n          .then((response) => {\n            // console.log(response.data);\n            this.isAuth = response.data;\n            return response.data;\n          })\n\n        \n      },\n      countVotes() {\n        const bodyContent = { id : this.freet.freetID};\n        axios.get(`/api/upvote?id=${bodyContent.id}`, bodyContent)\n          .then((response) => {\n            // console.log('current votes: ', response.data.votes);\n            this.voteCounts = response.data;\n          }).catch(err => {\n            eventBus.$emit(\"count-votes-error\", err);\n          }).then(() => {\n          });\n      },\n\n      updateFreet: function() {\n      const body = { id : this.freet.freetID, content : this.editFreetForm.content };\n      axios\n        .patch(`/api/freets`, body)\n        .then((res) => {\n          // handle success\n          \n          this.freetContent = res.data.content;\n          eventBus.$emit(\"update-freet-success\", res);\n        })\n        .catch(err => {\n          // handle error\n          eventBus.$emit(\"update-freet-error\", err);\n        })\n        // problem 2!\n        .then(() => ( this.editFreetForm.content = \"\"));\n      },\n\n      deleteFreet: function() {\n      const body = { id : this.freet.freetID};\n      axios\n        .delete(`/api/freets?id=${body.id}`, body)\n        .then(() => {\n          /* eslint-disable no-console */\n          console.log(this.freet);\n          eventBus.$emit(\"delete-freet-success\", this.freet);\n          this.freetCurrent = {}\n        })\n        .catch(err => {\n          eventBus.$emit(\"delete-freet-error\", err);\n        }).then(() => {\n        });\n        },\n\n\n      onUpvote: function() {\n        // console.log('upvote');\n        // evt.preventDefault();\n        const body = { id : this.freet.freetID };\n        axios.post(`/api/upvote`, body)\n          .then((res) => {\n            this.isUpvoted = true;\n            this.voteCounts = this.countVotes();\n            /* eslint-disable no-console */\n            console.log(res);\n            eventBus.$emit(\"upvote-success\", res);\n            // this.countVotes();\n          })\n          .catch(err => {\n            eventBus.$emit(\"upvote-error\", err);\n          }).then(() => {\n          });\n      },\n\n      onUndoUpvote: function() {\n        const bodyContent = { id : this.freet.freetID };\n        axios.patch(\"/api/upvote\", bodyContent)\n          .then(() => {\n            this.isUpvoted = false;\n            this.voteCounts = this.countVotes();\n            /* eslint-disable no-console */\n            console.log(this.freet);\n            eventBus.$emit(\"onupvote-success\", this.freet);\n          })\n          .catch(err => {\n            eventBus.$emit(\"onupvote-error\", err);\n          }).then(() => {\n          });\n      }, \n\n      refreet: function() {\n        // TODO: display button iff freet not in user.freets\n        \n        const bodyContent = { id : this.freet.freetID };\n        axios.post('/api/refreets', bodyContent)\n          .then((response) => {\n            /* eslint-disable no-console */\n            console.log(Response);\n            eventBus.$emit(\"create-refreet-success\", response);\n          })\n          .catch(err => {\n            eventBus.$emit(\"refreet-error\", err);\n          }).then(() => {\n          });\n      },\n\n      goToProfile: function (selected) {\n          // when the hash prop changes, this function will be fired.\n          let signedUsername = this.$cookie.get('fritter-auth');\n          if (selected === signedUsername && selected){\n            this.$router.push(`/profile`);\n            \n\n          } else if (this.selected !== signedUsername && selected){\n            this.$router.push(`/${selected}`);\n          }\n           \n        }\n\n\n\n\n  \n  \n\n\n\n\n\n    },\n\n\n\n\n  }\n\n</script>\n"]}]}