{"remainingRequest":"/Users/murphyren/Desktop/170/AS/a5-sanjass-zhengren/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/murphyren/Desktop/170/AS/a5-sanjass-zhengren/src/components/Freet.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/murphyren/Desktop/170/AS/a5-sanjass-zhengren/src/components/Freet.vue","mtime":1604378159343},{"path":"/Users/murphyren/Desktop/170/AS/a5-sanjass-zhengren/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/murphyren/Desktop/170/AS/a5-sanjass-zhengren/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/murphyren/Desktop/170/AS/a5-sanjass-zhengren/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCB7IGV2ZW50QnVzIH0gZnJvbSAiLi4vbWFpbiI7CgoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJmcmVldCIsCiAgY29tcG9uZW50czogewogICAgLy8gVE9ETwogIH0sCiAgcHJvcHM6IHsKICAgIGZyZWV0OiBPYmplY3QsCiAgICB1c2VyIDogT2JqZWN0LAogICAgaXNTaWduZWRJbjpCb29sZWFuLAogIH0sCiAgZGF0YSAoKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgaXNVcHZvdGVkIDogZmFsc2UsCiAgICAgICAgLy8gaXNSZWZyZWV0ZWQgOiBmYWxzZSwgCiAgICAgICAgZWRpdEZyZWV0UG9wdXA6IGZhbHNlLCAKICAgICAgICBlZGl0RnJlZXRGb3JtIDogewogICAgICAgICAgY29udGVudCA6ICcnLAogICAgICAgIH0sCiAgICAgICAgdm90ZUNvdW50cyA6IHRoaXMuY291bnRWb3RlcygpLAogICAgICAgIGZyZWV0Q29udGVudCA6IHRoaXMuZnJlZXQuY29udGVudCwKICAgICAgICBmcmVldEN1cnJlbnQgOiB0aGlzLmZyZWV0LAogICAgICAgIGF1dGhvciA6IHsKICAgICAgICAgIHVzZXJuYW1lIDogdGhpcy5mcmVldC5jcmVhdG9yVXNlcklELAogICAgICAgIH0sCiAgICAgIH0KICAgIH0sCiAgCgogIGNvbXB1dGVkIDogewogICAgaXNBdXRob3IgKCkgewogICAgICAvLyBwcm9ibGVtIHRoaXMgaXMgbmFtZSBub3QgSUQKICAgICAgcmV0dXJuIHRoaXMuJGNvb2tpZS5nZXQoJ2ZyaXR0ZXItYXV0aCcpID09IHRoaXMuZnJlZXQuY3JlYXRvclVzZXJJRDsKICAgIH0sCiAgfSwKCiAgbWV0aG9kcyA6IHsKICAgIGNvdW50Vm90ZXMoKSB7CiAgICAgIGNvbnN0IGJvZHlDb250ZW50ID0geyBpZCA6IHRoaXMuZnJlZXQuZnJlZXRJRH07CiAgICAgIGF4aW9zLmdldChgL2FwaS91cHZvdGU/aWQ9JHtib2R5Q29udGVudC5pZH1gLCBib2R5Q29udGVudCkKICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdjdXJyZW50IHZvdGVzOiAnLCByZXNwb25zZS5kYXRhLnZvdGVzKTsKICAgICAgICAgIHRoaXMudm90ZUNvdW50cyA9IHJlc3BvbnNlLmRhdGE7CiAgICAgICAgfSkuY2F0Y2goZXJyID0+IHsKICAgICAgICAgIGV2ZW50QnVzLiRlbWl0KCJjb3VudC12b3Rlcy1lcnJvciIsIGVycik7CiAgICAgICAgfSkudGhlbigoKSA9PiB7CiAgICAgICAgfSk7CiAgICB9LAoKICAgIHVwZGF0ZUZyZWV0OiBmdW5jdGlvbigpIHsKICAgIGNvbnN0IGJvZHkgPSB7IGlkIDogdGhpcy5mcmVldC5mcmVldElELCBjb250ZW50IDogdGhpcy5lZGl0RnJlZXRGb3JtLmNvbnRlbnQgfTsKICAgIGF4aW9zCiAgICAgIC5wYXRjaChgL2FwaS9mcmVldHNgLCBib2R5KQogICAgICAudGhlbigocmVzKSA9PiB7CiAgICAgICAgLy8gaGFuZGxlIHN1Y2Nlc3MKICAgICAgICAvLyBjb25zb2xlLmxvZygnZWRpdC1mcmVldC1zdWNjZXNzJykKICAgICAgICB0aGlzLmZyZWV0Q29udGVudCA9IHJlcy5kYXRhLmNvbnRlbnQ7CiAgICAgICAgZXZlbnRCdXMuJGVtaXQoInVwZGF0ZS1mcmVldC1zdWNjZXNzIiwgcmVzKTsKICAgICAgfSkKICAgICAgLmNhdGNoKGVyciA9PiB7CiAgICAgICAgLy8gaGFuZGxlIGVycm9yCiAgICAgICAgZXZlbnRCdXMuJGVtaXQoInVwZGF0ZS1mcmVldC1lcnJvciIsIGVycik7CiAgICAgIH0pCiAgICAgIC8vIHByb2JsZW0gMiEKICAgICAgLnRoZW4oKCkgPT4gKCB0aGlzLmVkaXRGcmVldEZvcm0uY29udGVudCA9ICIiKSk7CiAgICB9LAoKICAgIGRlbGV0ZUZyZWV0OiBmdW5jdGlvbigpIHsKICAgIGNvbnN0IGJvZHkgPSB7IGlkIDogdGhpcy5mcmVldC5mcmVldElEfTsKICAgIGF4aW9zCiAgICAgIC5kZWxldGUoYC9hcGkvZnJlZXRzP2lkPSR7Ym9keS5pZH1gLCBib2R5KQogICAgICAudGhlbigoKSA9PiB7CiAgICAgICAgZXZlbnRCdXMuJGVtaXQoImRlbGV0ZS1mcmVldC1zdWNjZXNzIiwgdGhpcy5mcmVldCk7CiAgICAgICAgdGhpcy5mcmVldEN1cnJlbnQgPSB7fQogICAgICB9KQogICAgICAuY2F0Y2goZXJyID0+IHsKICAgICAgICBldmVudEJ1cy4kZW1pdCgiZGVsZXRlLWZyZWV0LWVycm9yIiwgZXJyKTsKICAgICAgfSkudGhlbigoKSA9PiB7CiAgICAgIH0pOwogICAgICB9LAoKCiAgICBvblVwdm90ZTogZnVuY3Rpb24oKSB7CiAgICAgIC8vIGNvbnNvbGUubG9nKCd1cHZvdGUnKTsKICAgICAgLy8gZXZ0LnByZXZlbnREZWZhdWx0KCk7CiAgICAgIGNvbnN0IGJvZHkgPSB7IGlkIDogdGhpcy5mcmVldC5mcmVldElEIH07CiAgICAgIGF4aW9zLnBvc3QoYC9hcGkvdXB2b3RlYCwgYm9keSkKICAgICAgICAudGhlbigoKSA9PiB7CiAgICAgICAgICB0aGlzLmlzVXB2b3RlZCA9IHRydWU7CiAgICAgICAgICB0aGlzLnZvdGVDb3VudHMgPSB0aGlzLmNvdW50Vm90ZXMoKTsKICAgICAgICAgIC8vIHRoaXMuY291bnRWb3RlcygpOwogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKGVyciA9PiB7CiAgICAgICAgICBldmVudEJ1cy4kZW1pdCgidXB2b3RlLWVycm9yIiwgZXJyKTsKICAgICAgICB9KS50aGVuKCgpID0+IHsKICAgICAgICB9KTsKICAgIH0sCgogICAgb25VbmRvVXB2b3RlOiBmdW5jdGlvbigpIHsKICAgICAgY29uc3QgYm9keUNvbnRlbnQgPSB7IGlkIDogdGhpcy5mcmVldC5mcmVldElEIH07CiAgICAgIGF4aW9zLnBhdGNoKCIvYXBpL3Vwdm90ZSIsIGJvZHlDb250ZW50KQogICAgICAgIC50aGVuKCgpID0+IHsKICAgICAgICAgIHRoaXMuaXNVcHZvdGVkID0gZmFsc2U7CiAgICAgICAgICB0aGlzLnZvdGVDb3VudHMgPSB0aGlzLmNvdW50Vm90ZXMoKTsKICAgICAgICAgIC8vIHRoaXMuY291bnRWb3RlcygpOwogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKGVyciA9PiB7CiAgICAgICAgICBldmVudEJ1cy4kZW1pdCgidXB2b3RlLWVycm9yIiwgZXJyKTsKICAgICAgICB9KS50aGVuKCgpID0+IHsKICAgICAgICB9KTsKICAgIH0sIAoKCgoKCgoKCgoKCiAgfSwKCgoKCn0KCg=="},{"version":3,"sources":["Freet.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkCA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;AAYA;;;;;AAKA","file":"Freet.vue","sourceRoot":"src/components","sourcesContent":["\n<template>\n  <div class=\"freet-container\">\n\n\n    \n\n    <div class=\"freet-name\"> {{ freet.freetID }}</div>\n    <p>Creator ID: {{ freet.creatorUserID }}</p>\n    <p>Freet Content: {{ freetContent }}</p>\n    <p>Freet ID: {{ freet.freetID }}</p>\n    <button v-if=\"!isUpvoted\" \n                v-on:click=\"onUpvote\"\n                variant=\"info\">Upvote</button>\n\n    <button v-else-if=\"isUpvoted\" \n                v-on:click=\"onUndoUpvote\"\n                variant=\"info\">Undo Upvote</button>\n\n    # upvotes : {{voteCounts}}\n    \n      \n    \n    <div class=\"freet-item-actions\">\n      <input class=\"edit\" v-model='editFreetForm.content' type=\"text\" name=\"content\" placeholder=\"New Content\">\n      <button v-on:click=\"updateFreet\">Update</button>\n      <button v-on:click=\"deleteFreet\">Delete</button>\n\n    </div>\n  </div>\n</template>\n\n\n<script>\n  import axios from \"axios\";\n  import { eventBus } from \"../main\";\n\n\n  export default {\n    name: \"freet\",\n    components: {\n      // TODO\n    },\n    props: {\n      freet: Object,\n      user : Object,\n      isSignedIn:Boolean,\n    },\n    data () {\n        return {\n          isUpvoted : false,\n          // isRefreeted : false, \n          editFreetPopup: false, \n          editFreetForm : {\n            content : '',\n          },\n          voteCounts : this.countVotes(),\n          freetContent : this.freet.content,\n          freetCurrent : this.freet,\n          author : {\n            username : this.freet.creatorUserID,\n          },\n        }\n      },\n    \n\n    computed : {\n      isAuthor () {\n        // problem this is name not ID\n        return this.$cookie.get('fritter-auth') == this.freet.creatorUserID;\n      },\n    },\n\n    methods : {\n      countVotes() {\n        const bodyContent = { id : this.freet.freetID};\n        axios.get(`/api/upvote?id=${bodyContent.id}`, bodyContent)\n          .then((response) => {\n            // console.log('current votes: ', response.data.votes);\n            this.voteCounts = response.data;\n          }).catch(err => {\n            eventBus.$emit(\"count-votes-error\", err);\n          }).then(() => {\n          });\n      },\n\n      updateFreet: function() {\n      const body = { id : this.freet.freetID, content : this.editFreetForm.content };\n      axios\n        .patch(`/api/freets`, body)\n        .then((res) => {\n          // handle success\n          // console.log('edit-freet-success')\n          this.freetContent = res.data.content;\n          eventBus.$emit(\"update-freet-success\", res);\n        })\n        .catch(err => {\n          // handle error\n          eventBus.$emit(\"update-freet-error\", err);\n        })\n        // problem 2!\n        .then(() => ( this.editFreetForm.content = \"\"));\n      },\n\n      deleteFreet: function() {\n      const body = { id : this.freet.freetID};\n      axios\n        .delete(`/api/freets?id=${body.id}`, body)\n        .then(() => {\n          eventBus.$emit(\"delete-freet-success\", this.freet);\n          this.freetCurrent = {}\n        })\n        .catch(err => {\n          eventBus.$emit(\"delete-freet-error\", err);\n        }).then(() => {\n        });\n        },\n\n\n      onUpvote: function() {\n        // console.log('upvote');\n        // evt.preventDefault();\n        const body = { id : this.freet.freetID };\n        axios.post(`/api/upvote`, body)\n          .then(() => {\n            this.isUpvoted = true;\n            this.voteCounts = this.countVotes();\n            // this.countVotes();\n          })\n          .catch(err => {\n            eventBus.$emit(\"upvote-error\", err);\n          }).then(() => {\n          });\n      },\n\n      onUndoUpvote: function() {\n        const bodyContent = { id : this.freet.freetID };\n        axios.patch(\"/api/upvote\", bodyContent)\n          .then(() => {\n            this.isUpvoted = false;\n            this.voteCounts = this.countVotes();\n            // this.countVotes();\n          })\n          .catch(err => {\n            eventBus.$emit(\"upvote-error\", err);\n          }).then(() => {\n          });\n      }, \n\n\n\n\n  \n  \n\n\n\n\n\n    },\n\n\n\n\n  }\n\n</script>\n"]}]}