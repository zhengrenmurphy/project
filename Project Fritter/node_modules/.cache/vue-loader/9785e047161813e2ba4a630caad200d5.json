{"remainingRequest":"/Users/murphyren/Desktop/170/AS/a5-sanjass-zhengren/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/murphyren/Desktop/170/AS/a5-sanjass-zhengren/src/components/OtherUser/OtherUserProfileHeader.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/murphyren/Desktop/170/AS/a5-sanjass-zhengren/src/components/OtherUser/OtherUserProfileHeader.vue","mtime":1604342574961},{"path":"/Users/murphyren/Desktop/170/AS/a5-sanjass-zhengren/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/murphyren/Desktop/170/AS/a5-sanjass-zhengren/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/murphyren/Desktop/170/AS/a5-sanjass-zhengren/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCB7IGV2ZW50QnVzIH0gZnJvbSAiLi4vLi4vbWFpbiI7CgogIGV4cG9ydCBkZWZhdWx0IHsKICAgIG5hbWU6ICdPdGhlclVzZXJQcm9maWxlSGVhZGVyJywKICAgIGRhdGEoKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIGVycm9yczogW10sCiAgICAgICAgICBmb2xsb3dpbmcgOiBbXQogICAgICAgIH0KICAgIH0sCgogICAgcHJvcHM6IHsKICAgICAgdXNlcjogewogICAgICAgIHR5cGU6IE9iamVjdCwKICAgICAgICByZXF1aXJlZDogdHJ1ZQogICAgICB9CiAgICB9LAogICAgY3JlYXRlZDogZnVuY3Rpb24oKSB7CiAgICAgIHRoaXMuZ2V0Rm9sbG93aW5nKCk7CiAgICB9LAogICAgbWV0aG9kczogewoKICAgICAgZm9sbG93ICh1c2VySWQpewogICAgICAgIGNvbnN0IGJvZHlDb250ZW50ID0geyBuYW1lOiB1c2VySWR9OwogICAgICAgIGF4aW9zCiAgICAgICAgICAucG9zdCgiL2FwaS9mb2xsb3dzLyIsIGJvZHlDb250ZW50KQogICAgICAgICAgLnRoZW4oKCkgPT4gewogICAgICAgICAgICAvLyBoYW5kbGUgc3VjY2VzcwogICAgICAgICAgICB0aGlzLmZvbGxvd2luZy5wdXNoKHVzZXJJZCk7CiAgICAgICAgICAgIGV2ZW50QnVzLiRlbWl0KCdmb2xsb3ctc3VjY2VzcycsIHVzZXJJZCk7CiAgICAgICAgICB9KQogICAgICB9LAoKICAgICAgaXNGb2xsb3dpbmcgKHVzZXJJZCkgewogICAgICAgIAogICAgICAgIGZvciAoY29uc3QgZm9sbG93SWQgb2YgdGhpcy5mb2xsb3dpbmcpIHsKCiAgICAgICAgICBpZiAodXNlcklkID09PSBmb2xsb3dJZCkgewogICAgICAgICAgICByZXR1cm4gdHJ1ZQogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIGZhbHNlCiAgICAgIH0sCgogICAgICBnZXRGb2xsb3dpbmcgKCkgewogICAgICAgIGNvbnN0IGJvZHlDb250ZW50ID0ge307CiAgICAgICAgYXhpb3MKICAgICAgICAgIC5nZXQoIi9hcGkvZm9sbG93cy9mb2xsb3dpbmciLCBib2R5Q29udGVudCkKICAgICAgICAgIC50aGVuKChyZXMpID0+IHsKICAgICAgICAgICAgdGhpcy5mb2xsb3dpbmcgPSByZXMuZGF0YS5mb2xsb3dpbmcubWFwKHUgPT4gdS5mb2xsb3dlZElEKTsKICAgICAgICAgIH0pOwogICAgICAgICAgCiAgICAgIH0sCiAgICAgIHVuRm9sbG93ICh1c2VySWQpewogICAgICAgIGNvbnN0IGJvZHlDb250ZW50ID0geyBuYW1lOiB1c2VySWR9OwogICAgICAgIGF4aW9zCiAgICAgICAgICAucHV0KCIvYXBpL2ZvbGxvd3MvIiwgYm9keUNvbnRlbnQpCiAgICAgICAgICAudGhlbigoKSA9PiB7CiAgICAgICAgICAgIC8vIGhhbmRsZSBzdWNjZXNzCiAgICAgICAgICAgIGV2ZW50QnVzLiRlbWl0KCd1bmZvbGxvdy1zdWNjZXNzJywgdXNlcklkKTsKICAgICAgICAgICAgdmFyIGluZGV4ID0gdGhpcy5mb2xsb3dpbmcuaW5kZXhPZih1c2VySWQpOwogICAgICAgICAgICBpZiAoaW5kZXggIT09IC0xKSB7CiAgICAgICAgICAgICAgdGhpcy5mb2xsb3dpbmcuc3BsaWNlKGluZGV4LCAxKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSkKICAgICAgfSwKCiAgICAgIC8vIHVuRm9sbG93ICh1c2VySWQpIHsKICAgICAgLy8gICBjb25zdCB0b2tlbiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd0d2VldHItdG9rZW4nKQoKICAgICAgLy8gICBheGlvcwogICAgICAvLyAgICAgLmRlbGV0ZShgL2FwaS9mb2xsb3dzLyR7dXNlcklkfWAsIHsKICAgICAgLy8gICAgICAgaGVhZGVyczogewogICAgICAvLyAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0b2tlbn1gCiAgICAgIC8vICAgICAgIH0KICAgICAgLy8gICAgIH0pCiAgICAgIC8vICAgICAudGhlbigoKSA9PiB7CiAgICAgIC8vICAgICAgIHRoaXMuYXV0aFVzZXIuZm9sbG93aW5nID0gdGhpcy5hdXRoVXNlci5mb2xsb3dpbmcuZmlsdGVyKHUgPT4gewogICAgICAvLyAgICAgICAgIHJldHVybiB1LmlkICE9PSB1c2VySWQKICAgICAgLy8gICAgICAgfSkKICAgICAgLy8gICAgIH0pCiAgICAgIC8vIH0sCgogICAgY2xlYXJNZXNzYWdlczogZnVuY3Rpb24oKSB7CiAgICAgIHNldEludGVydmFsKCgpID0+IHsKICAgICAgICB0aGlzLmVycm9ycyA9IFtdOwogICAgICB9LCA1MDAwKTsKICAgIH0KICAgIH0KICB9Cgo="},{"version":3,"sources":["OtherUserProfileHeader.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+DA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"OtherUserProfileHeader.vue","sourceRoot":"src/components/OtherUser","sourcesContent":["<template>\n  <div class=\"ui segment\">\n    <div class=\"ui grid container\">\n      <div class=\"four wide column\">\n        <img class=\"ui tiny avatar image\" src=\"https://www.gravatar.com/avatar/default?s=200&r=pg&d=mm\">\n        <h2>Username: {{user.name}}</h2>\n        User Id: {{user.id}}\n\n      </div>\n<!--       <div class=\"bottom aligned twelve wide column\">\n        <div class=\"ui horizontal relaxed link list\">\n          <div class=\"item\">\n            <div class=\"content\">\n              <router-link :to=\"`/${user.username}`\">\n                <div class=\"header\">Tweets</div>\n                <strong>{{ user.tweets.length }}</strong>\n              </router-link>\n            </div>\n          </div>\n          <div class=\"item\">\n            <div class=\"content\">\n              <router-link :to=\"isOwner ? `/following` : `/${user.username}/following`\">\n                <div class=\"header\">Following</div>\n                <strong>{{ user.following.length }}</strong>\n              </router-link>\n            </div>\n          </div>\n          <div class=\"item\">\n            <div class=\"content\">\n              <router-link :to=\"isOwner ? `/followers` : `/${user.username}/followers`\">\n                <div class=\"header\">Followers</div>\n                <strong>{{ user.followers.length }}</strong>\n              </router-link>\n            </div>\n          </div>\n          <div class=\"item\">\n            <div class=\"content\">\n              <router-link :to=\"isOwner ? `/favorites` : `/${user.username}/favorites`\">\n                <div class=\"header\">Favorites</div>\n                <strong>{{ user.favorites.length }}</strong>\n              </router-link>\n            </div>\n          </div>\n        </div>\n        <div class=\"ui right floated horizontal list\" v-if=\"isOwner\">\n          <router-link to=\"/settings/profile\" class=\"ui button primary\">Edit profile</router-link>\n        </div> -->\n        <div class=\"ui right floated horizontal list\" >\n          <button class=\"ui tiny primary button\" v-if=\"isFollowing(user.id)\" @click=\"unFollow(user.id)\">Unfollow</button>\n          <button class=\"ui tiny primary button\" v-else @click=\"follow(user.id)\">Follow</button>\n        </div>\n<!--       </div> $route.params.username\n -->    </div>\n  <div v-if='errors.length' class=\"error-message\" style=\"width: 250px;\">\n      <b>Please correct the following error(s):</b>\n      <ul>\n        <li v-for='error in errors' v-bind:key='error.id'>{{ error }}</li>\n      </ul>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport { eventBus } from \"../../main\";\n\n  export default {\n    name: 'OtherUserProfileHeader',\n    data() {\n        return {\n          errors: [],\n          following : []\n        }\n    },\n\n    props: {\n      user: {\n        type: Object,\n        required: true\n      }\n    },\n    created: function() {\n      this.getFollowing();\n    },\n    methods: {\n\n      follow (userId){\n        const bodyContent = { name: userId};\n        axios\n          .post(\"/api/follows/\", bodyContent)\n          .then(() => {\n            // handle success\n            this.following.push(userId);\n            eventBus.$emit('follow-success', userId);\n          })\n      },\n\n      isFollowing (userId) {\n        \n        for (const followId of this.following) {\n\n          if (userId === followId) {\n            return true\n          }\n        }\n\n        return false\n      },\n\n      getFollowing () {\n        const bodyContent = {};\n        axios\n          .get(\"/api/follows/following\", bodyContent)\n          .then((res) => {\n            this.following = res.data.following.map(u => u.followedID);\n          });\n          \n      },\n      unFollow (userId){\n        const bodyContent = { name: userId};\n        axios\n          .put(\"/api/follows/\", bodyContent)\n          .then(() => {\n            // handle success\n            eventBus.$emit('unfollow-success', userId);\n            var index = this.following.indexOf(userId);\n            if (index !== -1) {\n              this.following.splice(index, 1);\n            }\n          })\n      },\n\n      // unFollow (userId) {\n      //   const token = localStorage.getItem('tweetr-token')\n\n      //   axios\n      //     .delete(`/api/follows/${userId}`, {\n      //       headers: {\n      //         Authorization: `Bearer ${token}`\n      //       }\n      //     })\n      //     .then(() => {\n      //       this.authUser.following = this.authUser.following.filter(u => {\n      //         return u.id !== userId\n      //       })\n      //     })\n      // },\n\n    clearMessages: function() {\n      setInterval(() => {\n        this.errors = [];\n      }, 5000);\n    }\n    }\n  }\n\n</script>"]}]}