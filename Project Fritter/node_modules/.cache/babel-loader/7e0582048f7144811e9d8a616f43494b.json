{"remainingRequest":"/Users/murphyren/Desktop/170/AS/a5-sanjass-zhengren/node_modules/thread-loader/dist/cjs.js!/Users/murphyren/Desktop/170/AS/a5-sanjass-zhengren/node_modules/babel-loader/lib/index.js!/Users/murphyren/Desktop/170/AS/a5-sanjass-zhengren/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/murphyren/Desktop/170/AS/a5-sanjass-zhengren/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/murphyren/Desktop/170/AS/a5-sanjass-zhengren/src/components/CreateFreetForm.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/murphyren/Desktop/170/AS/a5-sanjass-zhengren/src/components/CreateFreetForm.vue","mtime":1604363717759},{"path":"/Users/murphyren/Desktop/170/AS/a5-sanjass-zhengren/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/murphyren/Desktop/170/AS/a5-sanjass-zhengren/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/murphyren/Desktop/170/AS/a5-sanjass-zhengren/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/murphyren/Desktop/170/AS/a5-sanjass-zhengren/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/murphyren/Desktop/170/AS/a5-sanjass-zhengren/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IGF4aW9zIGZyb20gImF4aW9zIjsKaW1wb3J0IHsgZXZlbnRCdXMgfSBmcm9tICIuLi9tYWluIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJDcmVhdGVGcmVldEZvcm0iLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBlcnJvcnM6IFtdLAogICAgICBzdWNjZXNzOiAiIiwKICAgICAgZnJlZXROYW1lOiAiIgogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGNyZWF0ZUZyZWV0OiBmdW5jdGlvbiBjcmVhdGVGcmVldCgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHRoaXMuZXJyb3JzID0gW107CgogICAgICBpZiAodGhpcy5mcmVldE5hbWUgPT09ICIiKSB7CiAgICAgICAgdGhpcy5lcnJvcnMucHVzaCgiRnJlZXQgbmFtZSBpcyByZXF1aXJlZCIpOwogICAgICAgIHRoaXMuY2xlYXJNZXNzYWdlcygpOwogICAgICB9IGVsc2UgewogICAgICAgIGlmICh0aGlzLmZyZWV0TmFtZS5sZW5ndGggPiAxNDApIHsKICAgICAgICAgIHRoaXMuZXJyb3JzLnB1c2goIkZyZWV0IHNob3VsZCBiZSBubyBsb25nZXIgdGhhbiAxNDAgd29yZHMhIik7CiAgICAgICAgICB0aGlzLmNsZWFyTWVzc2FnZXMoKTsKICAgICAgICB9CgogICAgICAgIHZhciBib2R5Q29udGVudCA9IHsKICAgICAgICAgIGZyZWV0TmFtZTogdGhpcy5mcmVldE5hbWUKICAgICAgICB9OwogICAgICAgIGF4aW9zLnBvc3QoIi9hcGkvZnJlZXRzIiwgYm9keUNvbnRlbnQpLnRoZW4oZnVuY3Rpb24gKGZyZWV0KSB7CiAgICAgICAgICAvLyBoYW5kbGUgc3VjY2VzcwogICAgICAgICAgX3RoaXMuc3VjY2VzcyA9ICJGcmVldCBjcmVhdGVkIHN1Y2Nlc3NmdWxseSEiOwogICAgICAgICAgZXZlbnRCdXMuJGVtaXQoImNyZWF0ZS1mcmVldC1zdWNjZXNzIiwgZnJlZXQpOwogICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAgIC8vIGhhbmRsZSBlcnJvcgogICAgICAgICAgX3RoaXMuZXJyb3JzLnB1c2goZXJyLnJlc3BvbnNlLmRhdGEuZXJyb3IpOwogICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgLy8gYWx3YXlzIGV4ZWN1dGVkCiAgICAgICAgICBfdGhpcy5yZXNldEZvcm0oKTsKCiAgICAgICAgICBfdGhpcy5jbGVhck1lc3NhZ2VzKCk7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICByZXNldEZvcm06IGZ1bmN0aW9uIHJlc2V0Rm9ybSgpIHsKICAgICAgdGhpcy5mcmVldE5hbWUgPSAiIjsKICAgIH0sCiAgICBjbGVhck1lc3NhZ2VzOiBmdW5jdGlvbiBjbGVhck1lc3NhZ2VzKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHNldEludGVydmFsKGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpczIuZXJyb3JzID0gW107CiAgICAgICAgX3RoaXMyLnN1Y2Nlc3MgPSAiIjsKICAgICAgfSwgNTAwMCk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["CreateFreetForm.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6BA,OAAA,KAAA,MAAA,OAAA;AACA,SAAA,QAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,iBADA;AAGA,EAAA,IAHA,kBAGA;AACA,WAAA;AACA,MAAA,MAAA,EAAA,EADA;AAEA,MAAA,OAAA,EAAA,EAFA;AAGA,MAAA,SAAA,EAAA;AAHA,KAAA;AAKA,GATA;AAWA,EAAA,OAAA,EAAA;AACA,IAAA,WAAA,EAAA,uBAAA;AAAA;;AACA,WAAA,MAAA,GAAA,EAAA;;AAEA,UAAA,KAAA,SAAA,KAAA,EAAA,EAAA;AACA,aAAA,MAAA,CAAA,IAAA,CAAA,wBAAA;AACA,aAAA,aAAA;AAEA,OAJA,MAIA;AACA,YAAA,KAAA,SAAA,CAAA,MAAA,GAAA,GAAA,EAAA;AACA,eAAA,MAAA,CAAA,IAAA,CAAA,2CAAA;AACA,eAAA,aAAA;AACA;;AACA,YAAA,WAAA,GAAA;AAAA,UAAA,SAAA,EAAA,KAAA;AAAA,SAAA;AACA,QAAA,KAAA,CACA,IADA,gBACA,WADA,EAEA,IAFA,CAEA,UAAA,KAAA,EAAA;AACA;AACA,UAAA,KAAA,CAAA,OAAA,GAAA,6BAAA;AACA,UAAA,QAAA,CAAA,KAAA,CAAA,sBAAA,EAAA,KAAA;AACA,SANA,EAOA,KAPA,CAOA,UAAA,GAAA,EAAA;AACA;AACA,UAAA,KAAA,CAAA,MAAA,CAAA,IAAA,CAAA,GAAA,CAAA,QAAA,CAAA,IAAA,CAAA,KAAA;AACA,SAVA,EAWA,IAXA,CAWA,YAAA;AACA;AACA,UAAA,KAAA,CAAA,SAAA;;AACA,UAAA,KAAA,CAAA,aAAA;AACA,SAfA;AAgBA;AACA,KA/BA;AAiCA,IAAA,SAAA,EAAA,qBAAA;AACA,WAAA,SAAA,GAAA,EAAA;AACA,KAnCA;AAqCA,IAAA,aAAA,EAAA,yBAAA;AAAA;;AACA,MAAA,WAAA,CAAA,YAAA;AACA,QAAA,MAAA,CAAA,MAAA,GAAA,EAAA;AACA,QAAA,MAAA,CAAA,OAAA,GAAA,EAAA;AACA,OAHA,EAGA,IAHA,CAAA;AAIA;AA1CA;AAXA,CAAA","sourcesContent":["<template>\n  <div class=\"subcontainer\">\n    <div class=\"header primary-header\">\n      Create Freet\n    </div>\n    <div class=\"freet-form-container\">\n      <!-- the submit event will no longer reload the page -->\n      <form id='create-freet' v-on:submit.prevent='createFreet' method='post'>\n\n        <input id='name' v-model.trim='freetName' type='text' name='freetName'  placeholder=\"Enter Freet Name\">\n\n        <input type='submit' value=\"Create Freet\" id=\"createFreet\" class=\"button\">\n\n        <div v-if='success' class=\"success-message\">\n          {{ success }}\n        </div>\n\n        <div v-if='errors.length' class=\"error-message\">\n          <b>Please correct the following error(s):</b>\n          <ul>\n            <li v-for='error in errors' v-bind:key='error.id'>{{ error }}</li>\n          </ul>\n        </div>\n      </form>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport { eventBus } from \"../main\";\n\nexport default {\n  name: \"CreateFreetForm\",\n\n  data() {\n    return {\n      errors: [],\n      success: \"\",\n      freetName: \"\",\n    };\n  },\n\n  methods: {\n    createFreet: function() {\n      this.errors = [];\n\n      if (this.freetName === \"\") {\n        this.errors.push(\"Freet name is required\");\n        this.clearMessages();\n\n      } else {\n        if (this.freetName.length > 140) {\n            this.errors.push(\"Freet should be no longer than 140 words!\");\n            this.clearMessages();\n        }\n        const bodyContent = { freetName: this.freetName};\n        axios\n          .post(`/api/freets`, bodyContent)\n          .then(freet => {\n            // handle success\n            this.success = \"Freet created successfully!\";\n            eventBus.$emit(\"create-freet-success\", freet);\n          })\n          .catch(err => {\n            // handle error\n            this.errors.push(err.response.data.error);\n          })\n          .then(() => {\n            // always executed\n            this.resetForm();\n            this.clearMessages();\n          });\n      }\n    },\n\n    resetForm: function() {\n      this.freetName = \"\";\n    },\n\n    clearMessages: function() {\n      setInterval(() => {\n        this.errors = [];\n        this.success = \"\";\n      }, 5000);\n    }\n  }\n};\n</script>\n"],"sourceRoot":"src/components"}]}