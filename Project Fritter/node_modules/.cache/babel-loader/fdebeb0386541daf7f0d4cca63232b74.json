{"remainingRequest":"/Users/murphyren/Desktop/170/AS/a5-sanjass-zhengren/node_modules/babel-loader/lib/index.js!/Users/murphyren/Desktop/170/AS/a5-sanjass-zhengren/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/murphyren/Desktop/170/AS/a5-sanjass-zhengren/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/murphyren/Desktop/170/AS/a5-sanjass-zhengren/src/components/CreateFreetOnly.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/murphyren/Desktop/170/AS/a5-sanjass-zhengren/src/components/CreateFreetOnly.vue","mtime":1604961577847},{"path":"/Users/murphyren/Desktop/170/AS/a5-sanjass-zhengren/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/murphyren/Desktop/170/AS/a5-sanjass-zhengren/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/murphyren/Desktop/170/AS/a5-sanjass-zhengren/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/murphyren/Desktop/170/AS/a5-sanjass-zhengren/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IGF4aW9zIGZyb20gImF4aW9zIjsKaW1wb3J0IHsgZXZlbnRCdXMgfSBmcm9tICIuLi9tYWluIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJDcmVhdGVGcmVldEZvcm0iLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBlcnJvcnM6IFtdLAogICAgICBzdWNjZXNzOiAiIiwKICAgICAgZnJlZXROYW1lOiAiIgogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGNyZWF0ZUZyZWV0OiBmdW5jdGlvbiBjcmVhdGVGcmVldCgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHRoaXMuZXJyb3JzID0gW107CgogICAgICBpZiAodGhpcy5mcmVldE5hbWUgPT09ICIiKSB7CiAgICAgICAgdGhpcy5lcnJvcnMucHVzaCgiRnJlZXQgbmFtZSBpcyByZXF1aXJlZCIpOwogICAgICAgIHRoaXMuY2xlYXJNZXNzYWdlcygpOwogICAgICB9IGVsc2UgaWYgKCF0aGlzLiRjb29raWUuZ2V0KCdmcml0dGVyLWF1dGgnKSkgewogICAgICAgIHRoaXMuZXJyb3JzLnB1c2goInlvdSBuZWVkIHRvIGJlIHNpZ25lZCBpbiB0byBjcmVhdGUgYSBmcmVldCEiKTsKICAgICAgICB0aGlzLmNsZWFyTWVzc2FnZXMoKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBpZiAodGhpcy5mcmVldE5hbWUubGVuZ3RoID4gMTQwKSB7CiAgICAgICAgICB0aGlzLmVycm9ycy5wdXNoKCJGcmVldCBzaG91bGQgYmUgbm8gbG9uZ2VyIHRoYW4gMTQwIHdvcmRzISIpOwogICAgICAgICAgdGhpcy5jbGVhck1lc3NhZ2VzKCk7CiAgICAgICAgfQoKICAgICAgICB2YXIgYm9keUNvbnRlbnQgPSB7CiAgICAgICAgICBmcmVldE5hbWU6IHRoaXMuZnJlZXROYW1lCiAgICAgICAgfTsKICAgICAgICBheGlvcy5wb3N0KCIvYXBpL2ZyZWV0cyIsIGJvZHlDb250ZW50KS50aGVuKGZ1bmN0aW9uIChmcmVldCkgewogICAgICAgICAgLy8gaGFuZGxlIHN1Y2Nlc3MKICAgICAgICAgIF90aGlzLnN1Y2Nlc3MgPSAiRnJlZXQgY3JlYXRlZCBzdWNjZXNzZnVsbHkhIjsKICAgICAgICAgIGV2ZW50QnVzLiRlbWl0KCJjcmVhdGUtZnJlZXQtc3VjY2VzcyIsIGZyZWV0KTsKICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICAvLyBoYW5kbGUgZXJyb3IKICAgICAgICAgIF90aGlzLmVycm9ycy5wdXNoKGVyci5yZXNwb25zZS5kYXRhLmVycm9yKTsKICAgICAgICB9KS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIC8vIGFsd2F5cyBleGVjdXRlZAogICAgICAgICAgX3RoaXMucmVzZXRGb3JtKCk7CgogICAgICAgICAgX3RoaXMuY2xlYXJNZXNzYWdlcygpOwogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgcmVzZXRGb3JtOiBmdW5jdGlvbiByZXNldEZvcm0oKSB7CiAgICAgIHRoaXMuZnJlZXROYW1lID0gIiI7CiAgICB9LAogICAgY2xlYXJNZXNzYWdlczogZnVuY3Rpb24gY2xlYXJNZXNzYWdlcygpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXMyLmVycm9ycyA9IFtdOwogICAgICAgIF90aGlzMi5zdWNjZXNzID0gIiI7CiAgICAgIH0sIDUwMDApOwogICAgfQogIH0KfTs="},{"version":3,"sources":["CreateFreetOnly.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+BA,OAAA,KAAA,MAAA,OAAA;AACA,SAAA,QAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,iBADA;AAGA,EAAA,IAHA,kBAGA;AACA,WAAA;AACA,MAAA,MAAA,EAAA,EADA;AAEA,MAAA,OAAA,EAAA,EAFA;AAGA,MAAA,SAAA,EAAA;AAHA,KAAA;AAKA,GATA;AAWA,EAAA,OAAA,EAAA;AACA,IAAA,WAAA,EAAA,uBAAA;AAAA;;AACA,WAAA,MAAA,GAAA,EAAA;;AAEA,UAAA,KAAA,SAAA,KAAA,EAAA,EAAA;AACA,aAAA,MAAA,CAAA,IAAA,CAAA,wBAAA;AACA,aAAA,aAAA;AAEA,OAJA,MAKA,IAAA,CAAA,KAAA,OAAA,CAAA,GAAA,CAAA,cAAA,CAAA,EAAA;AACA,aAAA,MAAA,CAAA,IAAA,CAAA,6CAAA;AACA,aAAA,aAAA;AAEA,OAJA,MAKA;AACA,YAAA,KAAA,SAAA,CAAA,MAAA,GAAA,GAAA,EAAA;AACA,eAAA,MAAA,CAAA,IAAA,CAAA,2CAAA;AACA,eAAA,aAAA;AACA;;AACA,YAAA,WAAA,GAAA;AAAA,UAAA,SAAA,EAAA,KAAA;AAAA,SAAA;AACA,QAAA,KAAA,CACA,IADA,gBACA,WADA,EAEA,IAFA,CAEA,UAAA,KAAA,EAAA;AACA;AACA,UAAA,KAAA,CAAA,OAAA,GAAA,6BAAA;AACA,UAAA,QAAA,CAAA,KAAA,CAAA,sBAAA,EAAA,KAAA;AACA,SANA,EAOA,KAPA,CAOA,UAAA,GAAA,EAAA;AACA;AACA,UAAA,KAAA,CAAA,MAAA,CAAA,IAAA,CAAA,GAAA,CAAA,QAAA,CAAA,IAAA,CAAA,KAAA;AACA,SAVA,EAWA,IAXA,CAWA,YAAA;AACA;AACA,UAAA,KAAA,CAAA,SAAA;;AACA,UAAA,KAAA,CAAA,aAAA;AACA,SAfA;AAgBA;AACA,KArCA;AAuCA,IAAA,SAAA,EAAA,qBAAA;AACA,WAAA,SAAA,GAAA,EAAA;AACA,KAzCA;AA2CA,IAAA,aAAA,EAAA,yBAAA;AAAA;;AACA,MAAA,WAAA,CAAA,YAAA;AACA,QAAA,MAAA,CAAA,MAAA,GAAA,EAAA;AACA,QAAA,MAAA,CAAA,OAAA,GAAA,EAAA;AACA,OAHA,EAGA,IAHA,CAAA;AAIA;AAhDA;AAXA,CAAA","sourcesContent":["<template>\n  <div class=\"newsubcontainer\">\n      <div class=\"subcontainer\">\n    <div class=\"header primary-header\">\n      Create Freet\n    </div>\n    <div class=\"freet-form-container\">\n      <!-- the submit event will no longer reload the page -->\n      <form id='create-freet' v-on:submit.prevent='createFreet' method='post'>\n\n        <input id='name' v-model.trim='freetName' type='text' name='freetName'  placeholder=\"Enter Freet Content\">\n\n        <input  type='submit' value=\"Create Freet\" id=\"createFreet\" class=\"newbutton\">\n\n        <div v-if='success' class=\"success-message\">\n          {{ success }}\n        </div>\n\n        <div v-if='errors.length' class=\"error-message\">\n          <b>Please correct the following error(s):</b>\n          <ul>\n            <li v-for='error in errors' v-bind:key='error.id'>{{ error }}</li>\n          </ul>\n        </div>\n      </form>\n    </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport { eventBus } from \"../main\";\n\nexport default {\n  name: \"CreateFreetForm\",\n\n  data() {\n    return {\n      errors: [],\n      success: \"\",\n      freetName: \"\",\n    };\n  },\n\n  methods: {\n    createFreet: function() {\n      this.errors = [];\n\n      if (this.freetName === \"\") {\n        this.errors.push(\"Freet name is required\");\n        this.clearMessages();\n\n      } \n      else if (!this.$cookie.get('fritter-auth')){\n        this.errors.push(\"you need to be signed in to create a freet!\");\n        this.clearMessages();\n\n      } \n      else {\n        if (this.freetName.length > 140) {\n            this.errors.push(\"Freet should be no longer than 140 words!\");\n            this.clearMessages();\n        }\n        const bodyContent = { freetName: this.freetName};\n        axios\n          .post(`/api/freets`, bodyContent)\n          .then(freet => {\n            // handle success\n            this.success = \"Freet created successfully!\";\n            eventBus.$emit(\"create-freet-success\", freet);\n          })\n          .catch(err => {\n            // handle error\n            this.errors.push(err.response.data.error);\n          })\n          .then(() => {\n            // always executed\n            this.resetForm();\n            this.clearMessages();\n          });\n      }\n    },\n\n    resetForm: function() {\n      this.freetName = \"\";\n    },\n\n    clearMessages: function() {\n      setInterval(() => {\n        this.errors = [];\n        this.success = \"\";\n      }, 5000);\n    }\n  }\n};\n</script>\n"],"sourceRoot":"src/components"}]}