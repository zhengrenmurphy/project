{"remainingRequest":"/Users/murphyren/Desktop/170/nn/final-project-team-peach/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/murphyren/Desktop/170/nn/final-project-team-peach/src/components/ResBusinessTimepicker.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/murphyren/Desktop/170/nn/final-project-team-peach/src/components/ResBusinessTimepicker.vue","mtime":1607447801654},{"path":"/Users/murphyren/Desktop/170/nn/final-project-team-peach/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/murphyren/Desktop/170/nn/final-project-team-peach/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/murphyren/Desktop/170/nn/final-project-team-peach/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/murphyren/Desktop/170/nn/final-project-team-peach/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCBSZXNCeUNsaWVudFRhYmxlIGZyb20gIi4vUmVzQnlDbGllbnRUYWJsZSI7CgpleHBvcnQgZGVmYXVsdHsKICAgIG5hbWU6ICJyZXMtYnVzaW5lc3MtdGltZXNsb3RzIiwKICAgIGNvbXBvbmVudHM6IHsgUmVzQnlDbGllbnRUYWJsZSB9LAogICAgcHJvcHM6IHsKICAgICAgICBkYXRlOiBTdHJpbmcsCiAgICAgICAgc3RhcnQ6IFN0cmluZywKICAgICAgICBlbmQ6IFN0cmluZwogICAgfSwKICAgIGRhdGEoKXsKICAgICAgICByZXR1cm57CiAgICAgICAgICAgIHNlbGVjdGVkOiB7fSwKICAgICAgICAgICAgdGltZXNsb3RzOiBbXSwKICAgICAgICAgICAgZW1wdHk6ICIiCiAgICAgICAgfQogICAgfSwKICAgIHdhdGNoOiB7CiAgICAgICAgZGF0ZTogZnVuY3Rpb24odmFsKSB7CiAgICAgICAgICAgIHRoaXMuZGF0ZSA9IHZhbDsKICAgICAgICB9LAogICAgICAgIHRpbWVzbG90czogZnVuY3Rpb24odmFsKSB7CiAgICAgICAgICAgIHRoaXMudGltZXNsb3RzID0gdmFsCiAgICAgICAgfQogICAgfSwKICAgIG1vdW50ZWQ6IGFzeW5jIGZ1bmN0aW9uKCl7CiAgICAgICAgbGV0IGNsaWVudFJlcyA9IGF3YWl0IHRoaXMuZ2V0VGltZXNsb3RzKCkKICAgICAgICBpZihjbGllbnRSZXMubGVuZ3RoICE9PSAwKXsKICAgICAgICAgICAgY29uc3QgdGltZUFycmF5ID0gW10KCiAgICAgICAgICAgIGNsaWVudFJlcyA9IGNsaWVudFJlcy5maWx0ZXIocmVzID0+IHsKICAgICAgICAgICAgICAgIGxldCBkID0gbmV3IERhdGUodGhpcy5kYXRlKQogICAgICAgICAgICAgICAgbGV0IG5ld0RhdGUgPSBkLmdldERhdGUoKSArIDEKICAgICAgICAgICAgICAgIGQuc2V0RGF0ZShuZXdEYXRlKQogICAgICAgICAgICAgICAgaWYoZC50b0xvY2FsZURhdGVTdHJpbmcoKSA9PT0gbmV3IERhdGUocmVzLnRpbWUpLnRvTG9jYWxlRGF0ZVN0cmluZygpKXsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pLm1hcChyZXMgPT4gewogICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICB1c2VybmFtZTogcmVzLnVzZXJuYW1lLnNwbGl0KCcsJyksCiAgICAgICAgICAgICAgICAgICAgdGltZTogbmV3IERhdGUocmVzLnRpbWUpLnRvTG9jYWxlVGltZVN0cmluZygpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pCgogICAgICAgICAgICBjbGllbnRSZXMuZm9yRWFjaChyZXMgPT4gewogICAgICAgICAgICAgICAgdGltZUFycmF5LnB1c2goewogICAgICAgICAgICAgICAgICAgIHRpbWU6IHJlcy50aW1lLAogICAgICAgICAgICAgICAgICAgIHJlc2VydmF0aW9uczogewogICAgICAgICAgICAgICAgICAgICAgICBsaW1pdDogMTAsCiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWVzOiByZXMudXNlcm5hbWUKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICB9KQoKICAgICAgICAgICAgdGhpcy50aW1lc2xvdHMgPSB0aW1lQXJyYXk7CiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWQgPSAodGltZUFycmF5Lmxlbmd0aCA9PT0gMCk/IHt9OiB0aW1lQXJyYXlbMF07CiAgICAgICAgICAgIHRoaXMuZW1wdHkgPSAodGltZUFycmF5Lmxlbmd0aCA9PT0gMCk/ICJObyByZXNlcnZhdGlvbnMgb24gdGhpcyBkYXkhIjogIiIKICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgdGhpcy5lbXB0eSA9ICJObyByZXNlcnZhdGlvbnMgb24gdGhpcyBkYXkhIgogICAgICAgIH0KICAgIH0sCiAgICBtZXRob2RzOiB7CiAgICAgICAgZ2V0VGltZXNsb3RzOiBmdW5jdGlvbigpewogICAgICAgICAgICByZXR1cm4gYXhpb3MuZ2V0KGAvYXBpL2NsaWVudFJlcy9idXNpbmVzcy8ke3RoaXMuJGNvb2tpZS5nZXQoImtvc2gtYnVzaW5lc3MiKX1gKQogICAgICAgICAgICAudGhlbigocmVzKSA9PiB7CiAgICAgICAgICAgICAgICByZXR1cm4gcmVzLmRhdGEKICAgICAgICAgICAgfSkKICAgICAgICB9CiAgICB9Cn0K"},{"version":3,"sources":["ResBusinessTimepicker.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAuBA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ResBusinessTimepicker.vue","sourceRoot":"src/components","sourcesContent":["<template>\n    <div class=\"timeslot-capacity-container\">\n        <div v-if=\"empty\">\n            {{ empty }}\n        </div>\n        <!-- Times Table -->\n        <div v-else class=\"time-table-container\">\n            <table>\n                <th><u>{{ date }}</u></th>\n                <tr v-for='slot in timeslots' :key=\"slot\" class=\"time-row\">\n                    <td><button class=\"time-button\" v-if=\"selected===slot\" style=\"background-color:#93B1FF\" v-on:click=\"selected = slot\">{{ slot.time }}</button>\n                    <button class=\"time-button\" v-else v-on:click=\"selected = slot\">{{ slot.time }}</button></td>\n                </tr>\n            </table>\n        </div>\n        <ResByClientTable\n            v-bind:key='selected'\n            v-bind:reservations='selected.reservations'\n        />\n    </div>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport ResByClientTable from \"./ResByClientTable\";\n\nexport default{\n    name: \"res-business-timeslots\",\n    components: { ResByClientTable },\n    props: {\n        date: String,\n        start: String,\n        end: String\n    },\n    data(){\n        return{\n            selected: {},\n            timeslots: [],\n            empty: \"\"\n        }\n    },\n    watch: {\n        date: function(val) {\n            this.date = val;\n        },\n        timeslots: function(val) {\n            this.timeslots = val\n        }\n    },\n    mounted: async function(){\n        let clientRes = await this.getTimeslots()\n        if(clientRes.length !== 0){\n            const timeArray = []\n\n            clientRes = clientRes.filter(res => {\n                let d = new Date(this.date)\n                let newDate = d.getDate() + 1\n                d.setDate(newDate)\n                if(d.toLocaleDateString() === new Date(res.time).toLocaleDateString()){\n                    return res\n                }\n            }).map(res => {\n                return {\n                    username: res.username.split(','),\n                    time: new Date(res.time).toLocaleTimeString()\n                }\n            })\n\n            clientRes.forEach(res => {\n                timeArray.push({\n                    time: res.time,\n                    reservations: {\n                        limit: 10,\n                        names: res.username\n                    }\n                })\n            })\n\n            this.timeslots = timeArray;\n            this.selected = (timeArray.length === 0)? {}: timeArray[0];\n            this.empty = (timeArray.length === 0)? \"No reservations on this day!\": \"\"\n        }else{\n            this.empty = \"No reservations on this day!\"\n        }\n    },\n    methods: {\n        getTimeslots: function(){\n            return axios.get(`/api/clientRes/business/${this.$cookie.get(\"kosh-business\")}`)\n            .then((res) => {\n                return res.data\n            })\n        }\n    }\n}\n</script>\n\n"]}]}