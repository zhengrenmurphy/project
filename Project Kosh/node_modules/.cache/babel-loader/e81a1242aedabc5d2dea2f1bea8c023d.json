{"remainingRequest":"/Users/murphyren/Desktop/170/nn/final-project-team-peach/node_modules/babel-loader/lib/index.js!/Users/murphyren/Desktop/170/nn/final-project-team-peach/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/murphyren/Desktop/170/nn/final-project-team-peach/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/murphyren/Desktop/170/nn/final-project-team-peach/src/components/BusinessSignUpForm.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/murphyren/Desktop/170/nn/final-project-team-peach/src/components/BusinessSignUpForm.vue","mtime":1606864664723},{"path":"/Users/murphyren/Desktop/170/nn/final-project-team-peach/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/murphyren/Desktop/170/nn/final-project-team-peach/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/murphyren/Desktop/170/nn/final-project-team-peach/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/murphyren/Desktop/170/nn/final-project-team-peach/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IGF4aW9zIGZyb20gImF4aW9zIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJidXNpbmVzcy1zaWdudXAtZm9ybSIsCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHVzZXJuYW1lOiAiIiwKICAgICAgcGFzc3dvcmQ6ICIiLAogICAgICBmaXJzdE5hbWU6ICIiLAogICAgICBsYXN0TmFtZTogIiIsCiAgICAgIGVtYWlsOiAiIiwKICAgICAgYnVzaW5lc3NOYW1lOiAiIiwKICAgICAgZXJyb3I6ICIiLAogICAgICBzdWNjZXNzOiAiIiwKICAgICAgYnVzaW5lc3NFeGlzdHM6IGZhbHNlCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgc2lnblVwOiBmdW5jdGlvbiBzaWduVXAoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBpZiAodGhpcy51c2VybmFtZSA9PT0gIiIgfHwgdGhpcy5wYXNzd29yZCA9PT0gIiIgfHwgdGhpcy5maXJzdE5hbWUgPT09ICIiIHx8IHRoaXMubGFzdE5hbWUgPT09ICIiIHx8IHRoaXMuZW1haWwgPT09ICIiIHx8IHRoaXMuYnVzaW5lc3NOYW1lID09PSAiIikgewogICAgICAgIHRoaXMuZXJyb3IgPSAiWW91IG5lZWQgdG8gZmlsbCB1cCBhbGwgdGhlIGVudHJpZXMgdG8gc2lnbiB1cCEiOwogICAgICAgIHRoaXMucmVzZXRGb3JtKCk7CiAgICAgICAgdGhpcy5jbGVhck1lc3NhZ2VzKCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdmFyIGJvZHlDb250ZW50ID0gewogICAgICAgICAgdXNlcm5hbWU6IHRoaXMudXNlcm5hbWUsCiAgICAgICAgICBwYXNzd29yZDogdGhpcy5wYXNzd29yZCwKICAgICAgICAgIGZpcnN0TmFtZTogdGhpcy5maXJzdE5hbWUsCiAgICAgICAgICBsYXN0TmFtZTogdGhpcy5sYXN0TmFtZSwKICAgICAgICAgIGVtYWlsOiB0aGlzLmVtYWlsLAogICAgICAgICAgYnVzaW5lc3NUeXBlOiAxCiAgICAgICAgfTsKICAgICAgICBheGlvcy5wb3N0KCIvYXBpL2J1c2luZXNzL2V4aXN0IiwgewogICAgICAgICAgYnVzaW5lc3NuYW1lOiB0aGlzLmJ1c2luZXNzTmFtZQogICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgLy8gYnVzaW5lc3MgZXhpc3RzLCBjcmVhdGUgdXNlcgogICAgICAgICAgX3RoaXMuYnVzaW5lc3NFeGlzdHMgPSByZXMuZGF0YTsKICAgICAgICAgIHJldHVybiBheGlvcy5wb3N0KCIvYXBpL2NsaWVudHMiLCBib2R5Q29udGVudCk7CiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKCkgewogICAgICAgICAgLy8gYnVzaW5lc3MgZG9lcyBub3QgZXhpc3QsIGNyZWF0ZSB1c2VyCiAgICAgICAgICByZXR1cm4gYXhpb3MucG9zdCgiL2FwaS9jbGllbnRzIiwgYm9keUNvbnRlbnQpOwogICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgX3RoaXMuc3VjY2VzcyA9IHJlcy5kYXRhLm1lc3NhZ2U7CgogICAgICAgICAgaWYgKF90aGlzLmJ1c2luZXNzRXhpc3RzKSB7CiAgICAgICAgICAgIC8vIHVzZXIgY3JlYXRlZCwgYnVzaW5lc3MgZXhpc3RzCiAgICAgICAgICAgIGF4aW9zLnB1dCgiL2FwaS9idXNpbmVzcy91cGRhdGV1c2VyIiwgewogICAgICAgICAgICAgIGJ1c2luYW1lOiBfdGhpcy5idXNpbmVzc05hbWUsCiAgICAgICAgICAgICAgdXNlcm5hbWU6IF90aGlzLnVzZXJuYW1lCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICB2YXIgZW1wdHkgPSBKU09OLnN0cmluZ2lmeShbXSk7CiAgICAgICAgICAgIGF4aW9zLnBvc3QoIi9hcGkvYnVzaW5lc3NSZXMvYWRkIiwgewogICAgICAgICAgICAgIHVzZXJuYW1lOiBfdGhpcy51c2VybmFtZSwKICAgICAgICAgICAgICBidXNpbmVzc05hbWU6IF90aGlzLmJ1c2luZXNzTmFtZSwKICAgICAgICAgICAgICBjYXBhY2l0eTogMCwKICAgICAgICAgICAgICBsZW5ndGg6IDMwLAogICAgICAgICAgICAgIHRpbWVGcm9tOiBuZXcgRGF0ZSgiIi5jb25jYXQobmV3IERhdGUoKS50b0xvY2FsZURhdGVTdHJpbmcoKSwgIiAxMDowMDowMCBBTSIpKS50b0xvY2FsZVN0cmluZygpLAogICAgICAgICAgICAgIHRpbWVUbzogbmV3IERhdGUoIiIuY29uY2F0KG5ldyBEYXRlKCkudG9Mb2NhbGVEYXRlU3RyaW5nKCksICIgMTA6MDA6MDAgQU0iKSkudG9Mb2NhbGVTdHJpbmcoKSwKICAgICAgICAgICAgICBtb25kYXk6IGVtcHR5LAogICAgICAgICAgICAgIHR1ZXNkYXk6IGVtcHR5LAogICAgICAgICAgICAgIHdlZG5lc2RheTogZW1wdHksCiAgICAgICAgICAgICAgdGh1cnNkYXk6IGVtcHR5LAogICAgICAgICAgICAgIGZyaWRheTogZW1wdHksCiAgICAgICAgICAgICAgc2F0dXJkYXk6IGVtcHR5LAogICAgICAgICAgICAgIHN1bmRheTogZW1wdHkKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAvLyB1c2VyIGNyZWF0ZWQsIGJ1c2luZXNzIGRvZXMgbm90IGV4aXN0CiAgICAgICAgICAgIHZhciBidXNpbmVzc1JlY29yZCA9IHsKICAgICAgICAgICAgICB1c2VybmFtZTogX3RoaXMudXNlcm5hbWUsCiAgICAgICAgICAgICAgYnVzaW5hbWU6IF90aGlzLmJ1c2luZXNzTmFtZSwKICAgICAgICAgICAgICBhZGRyZXNzOiAiIiwKICAgICAgICAgICAgICBjaXR5OiAiIiwKICAgICAgICAgICAgICBzdGF0ZTogIiIsCiAgICAgICAgICAgICAgemlwY29kZTogIiIKICAgICAgICAgICAgfTsKICAgICAgICAgICAgYXhpb3MucG9zdCgiL2FwaS9idXNpbmVzcy9pbnNlcnQiLCBidXNpbmVzc1JlY29yZCk7CiAgICAgICAgICB9CiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgICAgICAgLy8gaGFuZGxlIGVycm9yCiAgICAgICAgICBfdGhpcy5lcnJvciA9IGVyci5yZXNwb25zZS5kYXRhLmVycm9yOwogICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgLy8gYWx3YXlzIGV4ZWN1dGVkCiAgICAgICAgICBfdGhpcy5yZXNldEZvcm0oKTsKCiAgICAgICAgICBfdGhpcy5jbGVhck1lc3NhZ2VzKCk7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICByZXNldEZvcm06IGZ1bmN0aW9uIHJlc2V0Rm9ybSgpIHsKICAgICAgdGhpcy51c2VybmFtZSA9ICIiOwogICAgICB0aGlzLnBhc3N3b3JkID0gIiIsIHRoaXMuZmlyc3ROYW1lID0gIiIsIHRoaXMubGFzdE5hbWUgPSAiIiwgdGhpcy5lbWFpbCA9ICIiLCB0aGlzLmJ1c2luZXNzTmFtZSA9ICIiOwogICAgfSwKICAgIGNsZWFyTWVzc2FnZXM6IGZ1bmN0aW9uIGNsZWFyTWVzc2FnZXMoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXMyLmVycm9yID0gIiI7CgogICAgICAgIGlmIChfdGhpczIuc3VjY2VzcyAhPSAiIikgewogICAgICAgICAgaWYgKCFfdGhpczIuYnVzaW5lc3NFeGlzdHMpIHsKICAgICAgICAgICAgX3RoaXMyLiRyb3V0ZXIucHVzaCgiL2xvZ2luIik7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBfdGhpczIuJHJvdXRlci5wdXNoKCIvbG9naW4iKTsKICAgICAgICAgIH0KCiAgICAgICAgICBfdGhpczIuc3VjY2VzcyA9ICIiOwogICAgICAgICAgX3RoaXMyLmJ1c2luZXNzRXhpc3RzID0gZmFsc2U7CiAgICAgICAgfQogICAgICB9LCAxMDAwKTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["BusinessSignUpForm.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"business-signup-form\">\n    <div class=\"business-signup-form-top\">\n      <input\n        class=\"name\"\n        style=\"margin-right: 20px\"\n        v-model=\"firstName\"\n        placeholder=\"First Name\"\n      />\n      <input class=\"name\" v-model=\"lastName\" placeholder=\"Last Name\" />\n    </div>\n    <input v-model=\"username\" placeholder=\"Username\" />\n    <input v-model=\"password\" placeholder=\"Password\" />\n    <input v-model=\"email\" placeholder=\"Email\" />\n    <input v-model=\"businessName\" placeholder=\"Business Name\"/>\n\n    <div class=\"business-signup-form-buttons\">\n      <button class=\"submit\" v-on:click=\"signUp\">Submit</button>\n      <router-link to=\"/login\">\n        <button class=\"cancel\">Cancel</button>\n      </router-link>\n    </div>\n    <div class=\"error-message\">\n      {{ error }}\n    </div>\n    <div class=\"success-message\">\n      {{ success }}\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\nexport default {\n  name: \"business-signup-form\",\n  data() {\n    return {\n      username: \"\",\n      password: \"\",\n      firstName: \"\",\n      lastName: \"\",\n      email: \"\",\n      businessName: \"\",\n      error: \"\",\n      success: \"\",\n      businessExists: false\n    };\n  },\n  methods: {\n    signUp: function () {\n      if (\n        this.username === \"\" ||\n        this.password === \"\" ||\n        this.firstName === \"\" || \n        this.lastName === \"\" ||\n        this.email === \"\" ||\n        this.businessName === \"\"\n      ){\n        this.error = \"You need to fill up all the entries to sign up!\";\n        this.resetForm();\n        this.clearMessages();\n      } else {\n        const bodyContent = {\n          username: this.username,\n          password: this.password,\n          firstName: this.firstName,\n          lastName: this.lastName,\n          email: this.email,\n          businessType: 1\n        };\n        axios\n          .post(`/api/business/exist`, { businessname: this.businessName })\n          .then((res) => {\n              // business exists, create user\n              this.businessExists = res.data;\n              return axios.post(\"/api/clients\", bodyContent);\n          })\n          .catch(() => {\n              // business does not exist, create user\n              return axios.post(\"/api/clients\", bodyContent);\n          })\n          .then((res) => {\n            this.success = res.data.message;\n            if (this.businessExists) {\n                // user created, business exists\n                axios.put(\"/api/business/updateuser\", { businame: this.businessName, username: this.username })\n                const empty = JSON.stringify([]);\n  \n                axios.post(\"/api/businessRes/add\", {username: this.username, businessName: this.businessName, capacity: 0, length: 30, timeFrom: new Date(`${(new Date()).toLocaleDateString()} 10:00:00 AM`).toLocaleString(), timeTo: new Date(`${(new Date()).toLocaleDateString()} 10:00:00 AM`).toLocaleString(), monday: empty, tuesday: empty, wednesday: empty, thursday: empty, friday: empty, saturday: empty, sunday: empty})\n                \n            } else {\n                // user created, business does not exist\n                const businessRecord = {\n                    username: this.username,\n                    businame: this.businessName,\n                    address: \"\",\n                    city: \"\",\n                    state: \"\",\n                    zipcode: \"\"\n                };\n                axios.post(\"/api/business/insert\", businessRecord);\n            }\n          })\n          .catch((err) => {\n            // handle error\n            this.error = err.response.data.error;\n          })\n          .then(() => {\n            // always executed\n            this.resetForm();\n            this.clearMessages();\n          });\n      }\n    },\n    resetForm: function () {\n      this.username = \"\";\n      this.password = \"\",\n      this.firstName = \"\",\n      this.lastName = \"\",\n      this.email = \"\",\n      this.businessName = \"\"\n    },\n    clearMessages: function () {\n      setTimeout(() => {\n        this.error = \"\";\n        if (this.success != \"\") {\n          if (!this.businessExists) {\n            this.$router.push(\"/login\")\n          } else {\n            this.$router.push(\"/login\");\n          }\n          this.success = \"\";\n          this.businessExists = false;\n        }\n      }, 1000);\n    },\n  },\n};\n</script>\n\n<style scoped>\n.business-signup-form-buttons {\n  display: flex;\n  justify-content: center;\n}\nbutton {\n  margin: 0;\n}\n.submit {\n  margin-right: 30px;\n}\n\ninput {\n  border: 1px solid black;\n  width: 200px;\n  height: 30px;\n  border-radius: 4px;\n  margin-bottom: 20px;\n}\n.name {\n  width: 90px;\n}\n.business-signup-form {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n}\n</style>"],"sourceRoot":"src/components"}]}